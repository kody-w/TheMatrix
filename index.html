<!--
  ╔══════════════════════════════════════════════════════════════════════════╗
  ║                            THE MATRIX GATEWAY                            ║
  ╚══════════════════════════════════════════════════════════════════════════╝

  Application: The Matrix - Main Gateway Interface
  Purpose: Primary entry point for The Matrix AI orchestration framework

  Description:
    This is the main gateway interface providing access to 150+ applications
    across 10 categories. Features include:
    - Interactive app browser with search and filtering
    - Multi-theme support (Matrix Green, Cyber Blue, Alert Red, etc.)
    - Responsive design for all devices
    - Local-first architecture (no external dependencies)
    - Agent system integration dashboard
    - Framework documentation access

  Architecture:
    - Single-page application (SPA) design
    - Pure HTML/CSS/JavaScript (no build process)
    - Category-based app organization
    - Dynamic app loading and filtering
    - Theme persistence via localStorage
    - Accessibility-first design

  Navigation Structure:
    Root → Categories → Applications
    - AI Tools (16 apps)
    - Business (6 apps)
    - Development (15 apps)
    - Education (17 apps)
    - Games (41 apps)
    - Health (3 apps)
    - Media (8 apps)
    - Productivity (15 apps)
    - Utilities (13 apps)
    - Local Apps (Various)

  Integration:
    - Links to Claude Code agent system
    - MCP server configuration access
    - Framework documentation hub
    - Steward autonomous improvement system

  Framework: The Matrix v1.0
  License: MIT (see LICENSE)
  Last Updated: 2025-11-20
  Maintained By: Steward Agent
-->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="The Matrix - AI Orchestration System | Generate N×M Outcomes at Scale Across Any Domain">
    <title>THE MATRIX | AI Orchestration System</title>
    <style>
        /* Reset and Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --matrix-green: #00ff41;
            --matrix-dark-green: #008F11;
            --deep-black: #0d0208;
            --glow-green: rgba(0, 255, 65, 0.5);
            --glass-bg: rgba(0, 255, 65, 0.05);
            --glass-border: rgba(0, 255, 65, 0.2);
        }

        /* ========== THEME VARIATIONS ========== */

        /* Theme: Matrix Green (Default) */
        body[data-theme="matrix-green"], body:not([data-theme]) {
            --matrix-green: #00ff41;
            --matrix-dark-green: #008F11;
            --deep-black: #0d0208;
            --glow-green: rgba(0, 255, 65, 0.5);
            --glass-bg: rgba(0, 255, 65, 0.05);
            --glass-border: rgba(0, 255, 65, 0.2);
        }

        /* Theme: Cyber Blue */
        body[data-theme="cyber-blue"] {
            --matrix-green: #00d4ff;
            --matrix-dark-green: #0077cc;
            --deep-black: #020a0d;
            --glow-green: rgba(0, 212, 255, 0.5);
            --glass-bg: rgba(0, 212, 255, 0.05);
            --glass-border: rgba(0, 212, 255, 0.2);
        }

        /* Theme: Alert Red */
        body[data-theme="alert-red"] {
            --matrix-green: #ff0044;
            --matrix-dark-green: #cc0022;
            --deep-black: #0d0202;
            --glow-green: rgba(255, 0, 68, 0.5);
            --glass-bg: rgba(255, 0, 68, 0.05);
            --glass-border: rgba(255, 0, 68, 0.2);
        }

        /* Theme: Premium Gold */
        body[data-theme="premium-gold"] {
            --matrix-green: #ffd700;
            --matrix-dark-green: #cc9900;
            --deep-black: #0d0a02;
            --glow-green: rgba(255, 215, 0, 0.5);
            --glass-bg: rgba(255, 215, 0, 0.05);
            --glass-border: rgba(255, 215, 0, 0.2);
        }

        /* Theme: Stealth Dark */
        body[data-theme="stealth-dark"] {
            --matrix-green: #888888;
            --matrix-dark-green: #555555;
            --deep-black: #000000;
            --glow-green: rgba(136, 136, 136, 0.5);
            --glass-bg: rgba(136, 136, 136, 0.05);
            --glass-border: rgba(136, 136, 136, 0.2);
        }

        body {
            font-family: 'Courier New', Consolas, monospace;
            background-color: var(--deep-black);
            color: var(--matrix-green);
            overflow-x: hidden;
            position: relative;
            min-height: 100vh;
        }

        /* Matrix Rain Background */
        #matrix-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            opacity: 0.3;
        }

        /* Scanline Effect */
        .scanline {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                to bottom,
                transparent 50%,
                rgba(0, 255, 65, 0.02) 50%
            );
            background-size: 100% 4px;
            z-index: 2;
            pointer-events: none;
            animation: scanline 8s linear infinite;
        }

        @keyframes scanline {
            0% { transform: translateY(0); }
            100% { transform: translateY(4px); }
        }

        /* Main Content Container */
        .container {
            position: relative;
            z-index: 3;
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
        }

        /* Header Section */
        header {
            text-align: center;
            padding: 4rem 0 2rem;
            animation: glitchHeader 3s infinite;
        }

        @keyframes glitchHeader {
            0%, 98%, 100% {
                text-shadow: 0 0 10px var(--glow-green),
                             0 0 20px var(--glow-green),
                             0 0 30px var(--glow-green);
            }
            99% {
                text-shadow: 2px 2px 10px var(--matrix-green),
                             -2px -2px 10px var(--matrix-green);
            }
        }

        h1 {
            font-size: clamp(2.5rem, 8vw, 6rem);
            font-weight: 700;
            letter-spacing: 0.3rem;
            margin-bottom: 1rem;
            text-transform: uppercase;
            animation: fadeInGlow 2s ease-in;
        }

        @keyframes fadeInGlow {
            from {
                opacity: 0;
                text-shadow: none;
            }
            to {
                opacity: 1;
                text-shadow: 0 0 10px var(--glow-green),
                             0 0 20px var(--glow-green),
                             0 0 30px var(--glow-green);
            }
        }

        .tagline {
            font-size: clamp(1rem, 2vw, 1.5rem);
            letter-spacing: 0.2rem;
            opacity: 0.8;
            margin-bottom: 1rem;
        }

        .blinking-cursor {
            animation: blink 1s step-end infinite;
        }

        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0; }
        }

        /* System Status */
        .system-status {
            display: flex;
            justify-content: center;
            gap: 2rem;
            flex-wrap: wrap;
            margin: 2rem 0;
            padding: 1.5rem;
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 10px;
            backdrop-filter: blur(10px);
        }

        .status-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9rem;
        }

        .status-indicator {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            animation: pulse 2s ease-in-out infinite;
        }

        .status-indicator.active {
            background-color: var(--matrix-green);
            box-shadow: 0 0 10px var(--matrix-green);
        }

        .status-indicator.standby {
            background-color: #ffff00;
            box-shadow: 0 0 10px #ffff00;
        }

        .status-indicator.offline {
            background-color: #ff0000;
            box-shadow: 0 0 10px #ff0000;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.2); opacity: 0.7; }
        }

        /* Main CTA Button */
        .main-cta {
            text-align: center;
            margin: 3rem 0;
        }

        .enter-button {
            padding: 1.5rem 4rem;
            font-size: 1.5rem;
            font-family: 'Courier New', Consolas, monospace;
            background: transparent;
            color: var(--matrix-green);
            border: 2px solid var(--matrix-green);
            border-radius: 5px;
            cursor: pointer;
            text-transform: uppercase;
            letter-spacing: 0.3rem;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .enter-button::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: var(--glow-green);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .enter-button:hover::before {
            width: 300px;
            height: 300px;
        }

        .enter-button:hover {
            background: var(--matrix-green);
            color: var(--deep-black);
            box-shadow: 0 0 20px var(--glow-green),
                        0 0 40px var(--glow-green);
            transform: scale(1.05);
        }

        .enter-button span {
            position: relative;
            z-index: 1;
        }

        /* Capabilities Grid */
        .capabilities-section {
            margin: 4rem 0;
        }

        .section-title {
            font-size: 2rem;
            text-align: center;
            margin-bottom: 2rem;
            text-transform: uppercase;
            letter-spacing: 0.2rem;
        }

        .capabilities-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .capability-card {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 10px;
            padding: 2rem;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            position: relative;
            overflow: hidden;
        }

        .capability-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                90deg,
                transparent,
                rgba(0, 255, 65, 0.1),
                transparent
            );
            transition: left 0.5s;
        }

        .capability-card:hover::before {
            left: 100%;
        }

        .capability-card:hover {
            border-color: var(--matrix-green);
            box-shadow: 0 0 20px var(--glow-green);
            transform: translateY(-5px);
        }

        .capability-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .capability-title {
            font-size: 1.3rem;
            font-weight: 700;
            text-transform: uppercase;
        }

        .capability-status {
            font-size: 0.8rem;
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            border: 1px solid;
        }

        .capability-status.ready {
            color: var(--matrix-green);
            border-color: var(--matrix-green);
            background: rgba(0, 255, 65, 0.1);
        }

        .capability-status.active {
            color: #ffff00;
            border-color: #ffff00;
            background: rgba(255, 255, 0, 0.1);
            animation: pulse 2s infinite;
        }

        .capability-status.coming-soon {
            color: #888;
            border-color: #888;
            background: rgba(136, 136, 136, 0.1);
        }

        .capability-description {
            font-size: 0.95rem;
            line-height: 1.6;
            opacity: 0.9;
            margin-bottom: 1rem;
        }

        .capability-stats {
            display: flex;
            gap: 1rem;
            font-size: 0.85rem;
            opacity: 0.7;
        }

        /* Terminal Section */
        .terminal-section {
            margin: 4rem 0;
        }

        .terminal {
            background: rgba(0, 0, 0, 0.8);
            border: 2px solid var(--matrix-green);
            border-radius: 10px;
            padding: 1.5rem;
            max-width: 900px;
            margin: 0 auto;
            box-shadow: 0 0 30px var(--glow-green);
        }

        .terminal-header {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid var(--glass-border);
        }

        .terminal-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }

        .dot-red { background-color: #ff5f56; }
        .dot-yellow { background-color: #ffbd2e; }
        .dot-green { background-color: #27c93f; }

        .terminal-title {
            margin-left: auto;
            font-size: 0.9rem;
            opacity: 0.7;
        }

        .terminal-output {
            min-height: 200px;
            max-height: 400px;
            overflow-y: auto;
            margin-bottom: 1rem;
            font-size: 0.95rem;
            line-height: 1.6;
        }

        .terminal-output::-webkit-scrollbar {
            width: 8px;
        }

        .terminal-output::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.3);
        }

        .terminal-output::-webkit-scrollbar-thumb {
            background: var(--matrix-green);
            border-radius: 4px;
        }

        .terminal-line {
            margin-bottom: 0.5rem;
        }

        .terminal-prompt {
            color: var(--matrix-green);
        }

        .terminal-input-line {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .terminal-input {
            flex: 1;
            background: transparent;
            border: none;
            color: var(--matrix-green);
            font-family: 'Courier New', Consolas, monospace;
            font-size: 0.95rem;
            outline: none;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            animation: fadeIn 0.3s;
        }

        .modal.active {
            display: flex;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            background: var(--deep-black);
            border: 2px solid var(--matrix-green);
            border-radius: 10px;
            padding: 2rem;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 0 50px var(--glow-green);
            animation: slideIn 0.3s;
        }

        @keyframes slideIn {
            from {
                transform: translateY(-50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--glass-border);
        }

        .modal-title {
            font-size: 1.5rem;
            text-transform: uppercase;
        }

        .close-modal {
            background: transparent;
            border: 1px solid var(--matrix-green);
            color: var(--matrix-green);
            padding: 0.5rem 1rem;
            cursor: pointer;
            font-family: 'Courier New', Consolas, monospace;
            border-radius: 5px;
            transition: all 0.3s;
        }

        .close-modal:hover {
            background: var(--matrix-green);
            color: var(--deep-black);
        }

        .modal-body {
            line-height: 1.8;
        }

        .modal-body h3 {
            margin: 1.5rem 0 1rem;
            color: var(--matrix-green);
        }

        .modal-body ul {
            list-style: none;
            padding-left: 1rem;
        }

        .modal-body li::before {
            content: '> ';
            color: var(--matrix-green);
        }

        /* Footer */
        footer {
            text-align: center;
            padding: 3rem 0 2rem;
            margin-top: 4rem;
            border-top: 1px solid var(--glass-border);
            opacity: 0.7;
        }

        .footer-info {
            display: flex;
            justify-content: center;
            gap: 2rem;
            flex-wrap: wrap;
            margin-top: 1rem;
            font-size: 0.9rem;
        }

        /* Boot Sequence Overlay */
        .boot-sequence {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--deep-black);
            z-index: 9999;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 2rem;
        }

        .boot-text {
            font-size: 1.2rem;
            margin: 0.5rem 0;
            opacity: 0;
            animation: bootLine 0.5s forwards;
        }

        @keyframes bootLine {
            to { opacity: 1; }
        }

        .boot-progress {
            width: 80%;
            max-width: 500px;
            height: 30px;
            border: 2px solid var(--matrix-green);
            border-radius: 5px;
            margin-top: 2rem;
            overflow: hidden;
            background: rgba(0, 0, 0, 0.5);
        }

        .boot-progress-bar {
            height: 100%;
            background: var(--matrix-green);
            width: 0%;
            box-shadow: 0 0 20px var(--glow-green);
            animation: bootProgress 3s ease-in-out forwards;
        }

        @keyframes bootProgress {
            to { width: 100%; }
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }

            header {
                padding: 2rem 0 1rem;
            }

            .system-status {
                gap: 1rem;
                padding: 1rem;
            }

            .enter-button {
                padding: 1rem 2rem;
                font-size: 1.2rem;
                letter-spacing: 0.2rem;
            }

            .capabilities-grid {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }

            .terminal {
                padding: 1rem;
            }

            .content-tabs {
                gap: 0.5rem;
            }

            .tab-button {
                padding: 0.6rem 1rem;
                font-size: 0.75rem;
                letter-spacing: 0.05rem;
            }

            .prompt-library-tabs {
                gap: 0.5rem;
            }

            .prompt-tab-button {
                padding: 0.5rem 1rem;
                font-size: 0.7rem;
            }

            .builder-container {
                grid-template-columns: 1fr;
            }

            .stats-row {
                grid-template-columns: repeat(2, 1fr);
            }

            .metrics-grid {
                grid-template-columns: 1fr;
            }

            .builder-actions {
                flex-direction: column;
            }

            .agent-scale-chart {
                height: 150px;
            }
        }

        /* Glitch Effect */
        .glitch {
            animation: glitch 5s infinite;
        }

        @keyframes glitch {
            0%, 90%, 100% {
                transform: translate(0);
            }
            91% {
                transform: translate(-2px, 2px);
            }
            92% {
                transform: translate(2px, -2px);
            }
            93% {
                transform: translate(-2px, -2px);
            }
            94% {
                transform: translate(2px, 2px);
            }
        }

        /* Breathing Animation */
        .breathing {
            animation: breathing 4s ease-in-out infinite;
        }

        @keyframes breathing {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.6; }
        }

        /* Tab System */
        .content-tabs {
            display: flex;
            justify-content: center;
            gap: 1rem;
            flex-wrap: wrap;
            margin: 2rem 0;
        }

        .tab-button, .prompt-tab-button {
            padding: 0.8rem 2rem;
            font-size: 0.95rem;
            font-family: 'Courier New', Consolas, monospace;
            background: transparent;
            color: var(--matrix-green);
            border: 2px solid var(--glass-border);
            border-radius: 5px;
            cursor: pointer;
            text-transform: uppercase;
            letter-spacing: 0.1rem;
            transition: all 0.3s ease;
        }

        .tab-button:hover, .prompt-tab-button:hover {
            border-color: var(--matrix-green);
            background: var(--glass-bg);
            box-shadow: 0 0 10px var(--glow-green);
        }

        .tab-button.active, .prompt-tab-button.active {
            background: var(--matrix-green);
            color: var(--deep-black);
            border-color: var(--matrix-green);
            box-shadow: 0 0 20px var(--glow-green);
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.5s;
        }

        .tab-content.active {
            display: block;
        }

        .prompt-library-tabs {
            display: flex;
            justify-content: center;
            gap: 0.8rem;
            flex-wrap: wrap;
            margin: 1rem 0;
        }

        .prompt-tab-button {
            padding: 0.6rem 1.5rem;
            font-size: 0.85rem;
        }

        /* Search System */
        .search-container {
            max-width: 800px;
            margin: 0 auto 2rem;
            position: relative;
        }

        .search-input {
            width: 100%;
            padding: 1rem 1.5rem;
            background: var(--glass-bg);
            border: 2px solid var(--glass-border);
            border-radius: 10px;
            color: var(--matrix-green);
            font-family: 'Courier New', Consolas, monospace;
            font-size: 1rem;
            outline: none;
            transition: all 0.3s;
        }

        .search-input:focus {
            border-color: var(--matrix-green);
            box-shadow: 0 0 20px var(--glow-green);
        }

        .search-results {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: rgba(0, 0, 0, 0.95);
            border: 2px solid var(--matrix-green);
            border-radius: 10px;
            margin-top: 0.5rem;
            max-height: 400px;
            overflow-y: auto;
            z-index: 100;
            display: none;
        }

        .search-results.active {
            display: block;
        }

        .search-result-item {
            padding: 1rem;
            border-bottom: 1px solid var(--glass-border);
            cursor: pointer;
            transition: all 0.3s;
        }

        .search-result-item:hover {
            background: var(--glass-bg);
        }

        .search-result-title {
            font-size: 1.1rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .search-result-category {
            font-size: 0.8rem;
            opacity: 0.6;
            text-transform: uppercase;
        }

        /* Prompt Builder */
        .builder-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            max-width: 1200px;
            margin: 0 auto;
        }

        .builder-form {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 10px;
            padding: 2rem;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: bold;
            text-transform: uppercase;
            font-size: 0.9rem;
        }

        .builder-input, .builder-textarea {
            width: 100%;
            padding: 0.8rem;
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid var(--glass-border);
            border-radius: 5px;
            color: var(--matrix-green);
            font-family: 'Courier New', Consolas, monospace;
            font-size: 0.95rem;
            outline: none;
            transition: all 0.3s;
        }

        .builder-input:focus, .builder-textarea:focus {
            border-color: var(--matrix-green);
            box-shadow: 0 0 10px var(--glow-green);
        }

        .hint {
            display: block;
            font-size: 0.8rem;
            opacity: 0.6;
            margin-top: 0.3rem;
        }

        .builder-generate-btn {
            width: 100%;
            padding: 1.2rem;
            background: var(--matrix-green);
            color: var(--deep-black);
            border: none;
            border-radius: 5px;
            font-family: 'Courier New', Consolas, monospace;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            text-transform: uppercase;
            letter-spacing: 0.2rem;
            transition: all 0.3s;
        }

        .builder-generate-btn:hover {
            box-shadow: 0 0 30px var(--glow-green);
            transform: scale(1.02);
        }

        .builder-output {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 10px;
            padding: 2rem;
        }

        .builder-output h3 {
            margin-bottom: 1rem;
            text-transform: uppercase;
        }

        .prompt-output {
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid var(--glass-border);
            border-radius: 5px;
            padding: 1.5rem;
            min-height: 300px;
            max-height: 500px;
            overflow-y: auto;
            margin-bottom: 1rem;
            line-height: 1.8;
            white-space: pre-wrap;
        }

        .builder-actions {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .action-btn {
            flex: 1;
            padding: 0.8rem;
            background: transparent;
            border: 2px solid var(--matrix-green);
            color: var(--matrix-green);
            border-radius: 5px;
            font-family: 'Courier New', Consolas, monospace;
            cursor: pointer;
            transition: all 0.3s;
        }

        .action-btn:hover {
            background: var(--matrix-green);
            color: var(--deep-black);
        }

        .estimated-metrics {
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid var(--glass-border);
            border-radius: 5px;
            padding: 1rem;
        }

        .estimated-metrics h4 {
            margin-bottom: 1rem;
            text-transform: uppercase;
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
        }

        .metric-item {
            text-align: center;
        }

        .metric-value {
            display: block;
            font-size: 2rem;
            font-weight: bold;
            color: var(--matrix-green);
        }

        .metric-label {
            display: block;
            font-size: 0.8rem;
            opacity: 0.6;
            margin-top: 0.5rem;
        }

        /* Analytics Dashboard */
        .analytics-dashboard {
            max-width: 1200px;
            margin: 0 auto;
        }

        .stats-row {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1.5rem;
            margin-bottom: 3rem;
        }

        .stat-card {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 10px;
            padding: 1.5rem;
            text-align: center;
            transition: all 0.3s;
        }

        .stat-card:hover {
            border-color: var(--matrix-green);
            box-shadow: 0 0 20px var(--glow-green);
            transform: translateY(-5px);
        }

        .stat-icon {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }

        .stat-value {
            font-size: 2.5rem;
            font-weight: bold;
            color: var(--matrix-green);
            display: block;
        }

        .stat-label {
            font-size: 0.9rem;
            opacity: 0.7;
            text-transform: uppercase;
            margin-top: 0.5rem;
        }

        .comparison-section {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 10px;
            padding: 2rem;
            margin-bottom: 2rem;
        }

        .comparison-section h3 {
            margin-bottom: 1.5rem;
            text-transform: uppercase;
        }

        .comparison-bars {
            position: relative;
        }

        .comparison-item {
            margin-bottom: 1.5rem;
        }

        .comparison-label {
            margin-bottom: 0.5rem;
            font-weight: bold;
        }

        .comparison-bar {
            position: relative;
            height: 50px;
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid var(--glass-border);
            border-radius: 5px;
            overflow: hidden;
        }

        .bar-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--matrix-dark-green), var(--matrix-green));
            display: flex;
            align-items: center;
            justify-content: center;
            transition: width 1s ease;
        }

        .bar-text {
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            font-weight: bold;
            z-index: 2;
        }

        .speedup-indicator {
            text-align: center;
            margin-top: 2rem;
            padding: 1.5rem;
            background: rgba(0, 255, 65, 0.1);
            border: 2px solid var(--matrix-green);
            border-radius: 10px;
        }

        .speedup-value {
            font-size: 3rem;
            font-weight: bold;
            color: var(--matrix-green);
            display: block;
        }

        .speedup-label {
            font-size: 1.2rem;
            text-transform: uppercase;
            opacity: 0.8;
        }

        .domain-distribution, .agent-visualization, .efficiency-matrix {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 10px;
            padding: 2rem;
            margin-bottom: 2rem;
        }

        .domain-distribution h3, .agent-visualization h3, .efficiency-matrix h3 {
            margin-bottom: 1.5rem;
            text-transform: uppercase;
        }

        .domain-chart {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .domain-bar {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 5px;
            position: relative;
            overflow: hidden;
        }

        .domain-bar::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            width: var(--percentage);
            background: linear-gradient(90deg, transparent, var(--glow-green));
            opacity: 0.3;
        }

        .domain-name {
            flex: 1;
            font-weight: bold;
            z-index: 1;
        }

        .domain-count {
            background: var(--matrix-green);
            color: var(--deep-black);
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-weight: bold;
            z-index: 1;
        }

        .agent-scale-chart {
            display: flex;
            height: 200px;
            gap: 0.5rem;
        }

        .scale-segment {
            flex: var(--size);
            background: linear-gradient(180deg, var(--matrix-green), var(--matrix-dark-green));
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            font-weight: bold;
            color: var(--deep-black);
            transition: all 0.3s;
            cursor: pointer;
        }

        .scale-segment:hover {
            transform: translateY(-10px);
            box-shadow: 0 10px 30px var(--glow-green);
        }

        .efficiency-table {
            width: 100%;
            border-collapse: collapse;
        }

        .efficiency-table th {
            background: rgba(0, 255, 65, 0.1);
            padding: 1rem;
            text-align: left;
            border: 1px solid var(--glass-border);
            text-transform: uppercase;
            font-size: 0.9rem;
        }

        .efficiency-table td {
            padding: 1rem;
            border: 1px solid var(--glass-border);
        }

        .efficiency-table tbody tr:hover {
            background: var(--glass-bg);
        }

        .efficiency-high {
            color: var(--matrix-green);
            font-size: 1.2rem;
        }

        .efficiency-medium {
            color: #ffff00;
            font-size: 1.2rem;
        }

        /* Quick Copy Button on Cards */
        .quick-copy-btn {
            position: absolute;
            bottom: 1rem;
            right: 1rem;
            padding: 0.5rem 1rem;
            background: var(--matrix-green);
            color: var(--deep-black);
            border: none;
            border-radius: 5px;
            font-family: 'Courier New', Consolas, monospace;
            font-size: 0.8rem;
            font-weight: bold;
            cursor: pointer;
            opacity: 0;
            transition: all 0.3s;
            z-index: 10;
        }

        .capability-card:hover .quick-copy-btn {
            opacity: 1;
        }

        .quick-copy-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 0 15px var(--glow-green);
        }

        /* Favorite Star Button */
        .favorite-btn {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: transparent;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            opacity: 0.3;
            transition: all 0.3s;
            z-index: 10;
        }

        .favorite-btn:hover {
            opacity: 1;
            transform: scale(1.2);
        }

        .favorite-btn.favorited {
            opacity: 1;
            animation: pulse 2s infinite;
        }

        /* Keyboard Shortcuts Panel */
        .shortcuts-panel {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            background: rgba(0, 0, 0, 0.95);
            border: 2px solid var(--matrix-green);
            border-radius: 10px;
            padding: 1.5rem;
            max-width: 300px;
            z-index: 9999;
            display: none;
            box-shadow: 0 0 30px var(--glow-green);
        }

        .shortcuts-panel.active {
            display: block;
            animation: slideInUp 0.3s;
        }

        @keyframes slideInUp {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .shortcuts-panel h3 {
            margin-bottom: 1rem;
            text-align: center;
            text-transform: uppercase;
        }

        .shortcut-item {
            display: flex;
            justify-content: space-between;
            padding: 0.5rem 0;
            border-bottom: 1px solid var(--glass-border);
        }

        .shortcut-key {
            background: var(--matrix-green);
            color: var(--deep-black);
            padding: 0.2rem 0.5rem;
            border-radius: 3px;
            font-weight: bold;
            font-size: 0.8rem;
        }

        .shortcut-desc {
            opacity: 0.8;
            font-size: 0.85rem;
        }

        /* Theme Selector Panel */
        .theme-selector-panel {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.9);
            background: rgba(0, 0, 0, 0.98);
            border: 2px solid var(--matrix-green);
            border-radius: 10px;
            padding: 2rem;
            max-width: 600px;
            width: 90%;
            z-index: 10000;
            display: none;
            opacity: 0;
            box-shadow: 0 0 50px var(--glow-green);
            transition: all 0.3s ease;
        }

        .theme-selector-panel.active {
            display: block;
            opacity: 1;
            transform: translate(-50%, -50%) scale(1);
            animation: themeSlideIn 0.3s;
        }

        @keyframes themeSlideIn {
            from {
                transform: translate(-50%, -50%) scale(0.8);
                opacity: 0;
            }
            to {
                transform: translate(-50%, -50%) scale(1);
                opacity: 1;
            }
        }

        .theme-selector-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid var(--glass-border);
        }

        .theme-selector-header h3 {
            margin: 0;
            text-transform: uppercase;
            font-size: 1.3rem;
        }

        .close-theme-btn {
            background: transparent;
            border: 1px solid var(--matrix-green);
            color: var(--matrix-green);
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.2rem;
            transition: all 0.3s;
        }

        .close-theme-btn:hover {
            background: var(--matrix-green);
            color: var(--deep-black);
            transform: rotate(90deg);
        }

        .theme-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
        }

        .theme-option {
            background: var(--glass-bg);
            border: 2px solid var(--glass-border);
            border-radius: 8px;
            padding: 1rem;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }

        .theme-option:hover {
            border-color: var(--matrix-green);
            box-shadow: 0 0 20px var(--glow-green);
            transform: translateY(-3px);
        }

        .theme-option.active {
            border-color: var(--matrix-green);
            background: var(--glass-bg);
            box-shadow: 0 0 20px var(--glow-green);
        }

        .theme-preview {
            width: 100%;
            height: 60px;
            border-radius: 5px;
            margin-bottom: 0.5rem;
            border: 1px solid var(--glass-border);
        }

        .theme-name {
            font-weight: bold;
            font-size: 0.9rem;
            margin-bottom: 0.3rem;
            text-transform: uppercase;
        }

        .theme-desc {
            font-size: 0.75rem;
            opacity: 0.7;
            font-style: italic;
        }

        /* Daily Challenge Modal */
        .daily-challenge-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 10001;
            display: none;
            justify-content: center;
            align-items: center;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .daily-challenge-modal.active {
            display: flex;
            opacity: 1;
            animation: fadeIn 0.3s;
        }

        .daily-challenge-content {
            background: var(--deep-black);
            border: 2px solid var(--matrix-green);
            border-radius: 15px;
            padding: 2rem;
            max-width: 600px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 0 60px var(--glow-green);
            animation: slideInScale 0.4s ease-out;
        }

        @keyframes slideInScale {
            from {
                transform: scale(0.8) translateY(50px);
                opacity: 0;
            }
            to {
                transform: scale(1) translateY(0);
                opacity: 1;
            }
        }

        .daily-challenge-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid var(--glass-border);
        }

        .daily-challenge-header h2 {
            margin: 0;
            text-transform: uppercase;
            font-size: 1.8rem;
            text-shadow: 0 0 10px var(--glow-green);
        }

        .close-challenge-btn {
            background: transparent;
            border: 1px solid var(--matrix-green);
            color: var(--matrix-green);
            width: 35px;
            height: 35px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.3rem;
            transition: all 0.3s;
        }

        .close-challenge-btn:hover {
            background: var(--matrix-green);
            color: var(--deep-black);
            transform: rotate(90deg);
        }

        .challenge-date {
            text-align: center;
            font-size: 0.9rem;
            opacity: 0.7;
            margin-bottom: 1.5rem;
            text-transform: uppercase;
            letter-spacing: 0.1rem;
        }

        .challenge-streak {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .streak-item {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 10px;
            padding: 1rem;
            text-align: center;
            transition: all 0.3s;
        }

        .streak-item:hover {
            border-color: var(--matrix-green);
            box-shadow: 0 0 15px var(--glow-green);
            transform: translateY(-3px);
        }

        .streak-icon {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        .streak-label {
            font-size: 0.75rem;
            opacity: 0.7;
            margin-bottom: 0.3rem;
            text-transform: uppercase;
        }

        .streak-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--matrix-green);
        }

        .challenge-prompt-card {
            background: var(--glass-bg);
            border: 2px solid var(--matrix-green);
            border-radius: 10px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 0 20px var(--glow-green);
        }

        .challenge-label {
            font-size: 0.75rem;
            opacity: 0.7;
            margin-bottom: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 0.15rem;
        }

        .challenge-prompt-card h3 {
            font-size: 1.5rem;
            margin-bottom: 1rem;
            color: var(--matrix-green);
            text-shadow: 0 0 10px var(--glow-green);
        }

        .challenge-prompt-card p {
            font-size: 0.95rem;
            line-height: 1.6;
            opacity: 0.9;
            margin-bottom: 1rem;
        }

        .challenge-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 0.8rem;
        }

        .challenge-stat {
            display: flex;
            flex-direction: column;
            gap: 0.3rem;
        }

        .challenge-stat .stat-label {
            font-size: 0.7rem;
            opacity: 0.6;
            text-transform: uppercase;
        }

        .challenge-stat .stat-value {
            font-size: 1.1rem;
            font-weight: bold;
            color: var(--matrix-green);
        }

        .challenge-actions {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .challenge-action-btn {
            padding: 1rem;
            font-size: 1rem;
            font-family: 'Courier New', Consolas, monospace;
            border: 2px solid var(--matrix-green);
            border-radius: 8px;
            cursor: pointer;
            text-transform: uppercase;
            transition: all 0.3s;
            background: transparent;
            color: var(--matrix-green);
        }

        .challenge-action-btn:hover {
            background: var(--matrix-green);
            color: var(--deep-black);
            box-shadow: 0 0 20px var(--glow-green);
            transform: translateY(-2px);
        }

        .challenge-action-btn.complete-btn {
            background: var(--matrix-green);
            color: var(--deep-black);
        }

        .challenge-action-btn.complete-btn:hover {
            background: var(--deep-black);
            color: var(--matrix-green);
        }

        .challenge-action-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }

        .challenge-status {
            background: linear-gradient(135deg, var(--glass-bg) 0%, rgba(0, 255, 65, 0.1) 100%);
            border: 2px solid var(--matrix-green);
            border-radius: 10px;
            padding: 1.5rem;
            text-align: center;
            animation: pulseGlow 2s infinite;
        }

        @keyframes pulseGlow {
            0%, 100% {
                box-shadow: 0 0 20px var(--glow-green);
            }
            50% {
                box-shadow: 0 0 40px var(--glow-green);
            }
        }

        .challenge-status .status-icon {
            font-size: 3rem;
            margin-bottom: 0.5rem;
        }

        .challenge-status .status-text {
            font-size: 1.3rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
            text-transform: uppercase;
            color: var(--matrix-green);
        }

        .challenge-status .status-points {
            font-size: 1rem;
            opacity: 0.8;
        }

        .daily-challenge-btn {
            position: relative;
        }

        .daily-challenge-btn .challenge-indicator {
            animation: flamePulse 1.5s infinite;
        }

        @keyframes flamePulse {
            0%, 100% {
                transform: scale(1);
                opacity: 1;
            }
            50% {
                transform: scale(1.2);
                opacity: 0.8;
            }
        }

        /* Floating Action Button */
        .fab {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            width: 60px;
            height: 60px;
            background: var(--matrix-green);
            color: var(--deep-black);
            border: none;
            border-radius: 50%;
            font-size: 1.5rem;
            cursor: pointer;
            box-shadow: 0 0 30px var(--glow-green);
            z-index: 9998;
            transition: all 0.3s;
        }

        .fab:hover {
            transform: scale(1.1) rotate(90deg);
            box-shadow: 0 0 50px var(--glow-green);
        }

        /* Stats Badge */
        .stats-badge {
            position: fixed;
            top: 2rem;
            left: 2rem;
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 10px;
            padding: 1rem;
            z-index: 100;
            backdrop-filter: blur(10px);
            min-width: 200px;
        }

        .stats-badge h4 {
            font-size: 0.8rem;
            text-transform: uppercase;
            margin-bottom: 0.5rem;
            opacity: 0.7;
        }

        .stat-row {
            display: flex;
            justify-content: space-between;
            padding: 0.3rem 0;
            font-size: 0.9rem;
        }

        .stat-value {
            color: var(--matrix-green);
            font-weight: bold;
        }

        /* Progress Bar */
        .progress-container {
            margin-top: 0.5rem;
            height: 5px;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 5px;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            background: var(--matrix-green);
            width: 0%;
            transition: width 0.5s;
            box-shadow: 0 0 10px var(--glow-green);
        }

        /* Filter Panel */
        .filter-panel {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 10px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }

        .filter-group {
            margin-bottom: 1rem;
        }

        .filter-label {
            display: block;
            font-size: 0.9rem;
            font-weight: bold;
            text-transform: uppercase;
            margin-bottom: 0.5rem;
        }

        .filter-pills {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .filter-pill {
            padding: 0.5rem 1rem;
            background: transparent;
            border: 2px solid var(--glass-border);
            border-radius: 20px;
            color: var(--matrix-green);
            font-family: 'Courier New', Consolas, monospace;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.3s;
        }

        .filter-pill:hover {
            border-color: var(--matrix-green);
            background: var(--glass-bg);
        }

        .filter-pill.active {
            background: var(--matrix-green);
            color: var(--deep-black);
            border-color: var(--matrix-green);
        }

        /* Comparison Mode */
        .comparison-controls {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            gap: 2rem;
            align-items: end;
            margin-bottom: 2rem;
            max-width: 1000px;
            margin-left: auto;
            margin-right: auto;
        }

        .comparison-selector {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .comparison-selector label {
            font-weight: bold;
            text-transform: uppercase;
            font-size: 0.9rem;
        }

        .comparison-select {
            padding: 0.8rem;
            background: rgba(0, 0, 0, 0.5);
            border: 2px solid var(--glass-border);
            border-radius: 5px;
            color: var(--matrix-green);
            font-family: 'Courier New', Consolas, monospace;
            font-size: 0.95rem;
            cursor: pointer;
            transition: all 0.3s;
        }

        .comparison-select:hover, .comparison-select:focus {
            border-color: var(--matrix-green);
            box-shadow: 0 0 10px var(--glow-green);
        }

        .vs-indicator {
            font-size: 2rem;
            font-weight: bold;
            color: var(--matrix-green);
            padding: 0 1rem;
            align-self: center;
            text-shadow: 0 0 10px var(--glow-green);
        }

        .comparison-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin-top: 2rem;
        }

        .comparison-slot {
            background: var(--glass-bg);
            border: 2px dashed var(--glass-border);
            border-radius: 10px;
            padding: 2rem;
            text-align: center;
            min-height: 400px;
            position: relative;
            transition: all 0.3s;
        }

        .comparison-slot.filled {
            border-style: solid;
            border-color: var(--matrix-green);
            box-shadow: 0 0 20px var(--glow-green);
        }

        .placeholder-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 1.2rem;
            opacity: 0.5;
        }

        .comparison-prompt-card {
            background: rgba(0, 0, 0, 0.5);
            border-radius: 5px;
            padding: 1.5rem;
            text-align: left;
            height: 100%;
        }

        .comparison-prompt-title {
            font-size: 1.3rem;
            font-weight: bold;
            margin-bottom: 1rem;
            color: var(--matrix-green);
            text-transform: uppercase;
        }

        .comparison-metric {
            display: flex;
            justify-content: space-between;
            padding: 0.8rem;
            margin-bottom: 0.5rem;
            background: rgba(0, 255, 65, 0.05);
            border-left: 3px solid var(--matrix-green);
            border-radius: 3px;
        }

        .metric-label {
            font-weight: bold;
            opacity: 0.8;
        }

        .metric-value {
            color: var(--matrix-green);
            font-weight: bold;
        }

        .comparison-verdict {
            margin-top: 3rem;
            background: var(--glass-bg);
            border: 2px solid var(--matrix-green);
            border-radius: 10px;
            padding: 2rem;
            animation: fadeIn 0.5s;
        }

        .comparison-verdict h3 {
            margin-bottom: 1rem;
            text-align: center;
            text-transform: uppercase;
        }

        .verdict-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
        }

        .verdict-section {
            padding: 1rem;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 5px;
        }

        .verdict-section h4 {
            margin-bottom: 0.5rem;
            color: var(--matrix-green);
            text-transform: uppercase;
        }

        .winner-badge {
            display: inline-block;
            padding: 0.5rem 1rem;
            background: var(--matrix-green);
            color: var(--deep-black);
            border-radius: 20px;
            font-weight: bold;
            margin-left: 1rem;
        }

        /* Achievement System */
        .achievement-notification {
            position: fixed;
            top: -200px;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(135deg, var(--deep-black), var(--matrix-dark-green));
            border: 3px solid var(--matrix-green);
            border-radius: 15px;
            padding: 2rem;
            min-width: 400px;
            text-align: center;
            z-index: 10001;
            box-shadow: 0 0 50px var(--glow-green);
            transition: top 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        .achievement-notification.show {
            top: 2rem;
        }

        .achievement-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
            animation: bounce 0.6s;
        }

        @keyframes bounce {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }

        .achievement-title {
            font-size: 1.5rem;
            font-weight: bold;
            text-transform: uppercase;
            margin-bottom: 0.5rem;
            color: var(--matrix-green);
        }

        .achievement-desc {
            opacity: 0.8;
            font-size: 0.9rem;
        }

        .achievement-progress {
            margin-top: 1rem;
            font-size: 0.8rem;
            opacity: 0.6;
        }

        /* Achievements Modal */
        .achievements-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
        }

        .achievement-card {
            background: var(--glass-bg);
            border: 2px solid var(--glass-border);
            border-radius: 10px;
            padding: 1.5rem;
            text-align: center;
            transition: all 0.3s;
        }

        .achievement-card.unlocked {
            border-color: var(--matrix-green);
            box-shadow: 0 0 20px var(--glow-green);
        }

        .achievement-card.locked {
            opacity: 0.3;
            filter: grayscale(100%);
        }

        .achievement-card:hover {
            transform: translateY(-5px);
        }

        .achievement-card-icon {
            font-size: 3rem;
            margin-bottom: 0.5rem;
        }

        .achievement-card-title {
            font-weight: bold;
            margin-bottom: 0.5rem;
            text-transform: uppercase;
        }

        .achievement-card-desc {
            font-size: 0.85rem;
            opacity: 0.7;
        }

        .achievement-card-progress {
            margin-top: 0.5rem;
            font-size: 0.75rem;
            color: var(--matrix-green);
        }

        /* Konami Code Indicator */
        .konami-mode {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 10rem;
            opacity: 0;
            pointer-events: none;
            z-index: 10002;
            animation: konamiPulse 2s ease-out forwards;
        }

        @keyframes konamiPulse {
            0% { opacity: 0; transform: translate(-50%, -50%) scale(0.5); }
            50% { opacity: 1; transform: translate(-50%, -50%) scale(1.2); }
            100% { opacity: 0; transform: translate(-50%, -50%) scale(2); }
        }

        /* Matrix Glitch Effect */
        @keyframes matrixGlitch {
            0% { transform: translate(0); }
            20% { transform: translate(-2px, 2px); }
            40% { transform: translate(-2px, -2px); }
            60% { transform: translate(2px, 2px); }
            80% { transform: translate(2px, -2px); }
            100% { transform: translate(0); }
        }

        .glitch-active {
            animation: matrixGlitch 0.3s infinite;
        }

        /* Theme Selector */
        .theme-selector {
            position: fixed;
            bottom: 8rem;
            right: 2rem;
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 10px;
            padding: 1rem;
            display: none;
            z-index: 9997;
            backdrop-filter: blur(10px);
        }

        .theme-selector.active {
            display: block;
        }

        .theme-selector h4 {
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
            text-transform: uppercase;
        }

        .theme-option {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem;
            cursor: pointer;
            border-radius: 5px;
            transition: all 0.3s;
        }

        .theme-option:hover {
            background: var(--glass-bg);
        }

        .theme-color {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            border: 2px solid var(--glass-border);
        }

        /* Wake Up Neo Easter Egg */
        .wake-up-neo {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 3rem;
            text-align: center;
            opacity: 0;
            pointer-events: none;
            z-index: 10000;
            text-shadow: 0 0 20px var(--glow-green);
        }

        .wake-up-neo.active {
            animation: wakeUpNeo 3s forwards;
        }

        @keyframes wakeUpNeo {
            0% { opacity: 0; transform: translate(-50%, -50%) scale(0.5); }
            50% { opacity: 1; transform: translate(-50%, -50%) scale(1.2); }
            100% { opacity: 0; transform: translate(-50%, -50%) scale(1); }
        }

        /* ========== WAVE 4: PRINT STYLESHEET ========== */
        @media print {
            /* Reset for clean printing */
            * {
                -webkit-print-color-adjust: exact !important;
                print-color-adjust: exact !important;
            }

            /* Hide unnecessary UI elements */
            #matrix-canvas,
            .scanline,
            .fab,
            #fab-menu,
            .stats-badge,
            .action-btn,
            .shortcuts-panel,
            .theme-selector-panel,
            .daily-challenge-modal,
            .achievement-notification,
            .toast-notification,
            .wake-up-neo,
            .konami-mode,
            header,
            footer,
            .terminal-section,
            .content-tabs,
            .search-container,
            .modal-header .close-modal,
            .enter-button,
            .system-status,
            .quick-copy-btn,
            .favorite-star {
                display: none !important;
            }

            /* Body and page setup */
            body {
                background: white !important;
                color: black !important;
                font-family: 'Times New Roman', serif;
                margin: 0;
                padding: 0;
            }

            .container {
                max-width: 100%;
                padding: 0;
                margin: 0;
            }

            /* Page breaks */
            .capability-card,
            .prompt-card,
            .modal-content,
            .comparison-container {
                page-break-inside: avoid;
                break-inside: avoid;
            }

            .section-title {
                page-break-after: avoid;
                break-after: avoid;
            }

            /* Print header for each page */
            @page {
                margin: 2cm;
                @top-center {
                    content: "THE MATRIX - AI Orchestration System";
                    font-size: 10pt;
                    font-family: 'Times New Roman', serif;
                }
                @bottom-right {
                    content: "Page " counter(page) " of " counter(pages);
                    font-size: 9pt;
                }
            }

            /* Headings */
            h1, h2, h3, h4 {
                color: black !important;
                text-shadow: none !important;
            }

            h1 {
                font-size: 24pt;
                border-bottom: 2px solid black;
                padding-bottom: 10pt;
                margin-bottom: 20pt;
            }

            h2 {
                font-size: 18pt;
                margin-top: 20pt;
                margin-bottom: 12pt;
            }

            h3 {
                font-size: 14pt;
                margin-top: 15pt;
                margin-bottom: 10pt;
            }

            /* Prompt cards for printing */
            .capability-card,
            .prompt-card {
                border: 2px solid black !important;
                border-radius: 0 !important;
                background: white !important;
                padding: 15pt;
                margin-bottom: 20pt;
                box-shadow: none !important;
            }

            .capability-title,
            .prompt-title {
                color: black !important;
                font-size: 14pt;
                font-weight: bold;
                margin-bottom: 8pt;
            }

            .capability-description,
            .prompt-description {
                color: black !important;
                opacity: 1 !important;
                line-height: 1.6;
                font-size: 11pt;
            }

            /* Stats and metrics */
            .capability-stats,
            .prompt-stats,
            .challenge-stats {
                border-top: 1px solid #ccc;
                padding-top: 10pt;
                margin-top: 10pt;
            }

            .stat-label {
                font-weight: bold;
                color: black !important;
            }

            .stat-value {
                color: black !important;
            }

            /* Modal content */
            .modal-content {
                border: 2px solid black !important;
                background: white !important;
                box-shadow: none !important;
                max-width: 100% !important;
                max-height: none !important;
                padding: 20pt;
            }

            .modal-title {
                font-size: 18pt;
                color: black !important;
            }

            .modal-body {
                color: black !important;
                line-height: 1.8;
                font-size: 11pt;
            }

            .modal-body ul {
                padding-left: 20pt;
            }

            .modal-body li {
                margin-bottom: 5pt;
            }

            .modal-body li::before {
                content: '• ';
                color: black !important;
            }

            /* Tables and grids */
            .capabilities-grid,
            .prompt-grid {
                display: block !important;
            }

            /* Comparison tool */
            .comparison-container {
                border: 1px solid black !important;
                background: white !important;
            }

            .comparison-slot {
                border: 1px solid #ccc !important;
                background: white !important;
            }

            .comparison-verdict {
                border-top: 2px solid black;
                padding-top: 15pt;
                margin-top: 15pt;
            }

            /* Builder and analytics */
            .builder-form,
            .analytics-section {
                display: none !important;
            }

            /* Links */
            a {
                color: black !important;
                text-decoration: underline;
            }

            a[href]:after {
                content: " (" attr(href) ")";
                font-size: 9pt;
                font-style: italic;
            }

            /* No colors from themes */
            * {
                color: black !important;
                background-color: white !important;
                border-color: black !important;
            }

            /* Except for specific semantic elements */
            .capability-status,
            .prompt-status {
                border: 1px solid black !important;
                padding: 3pt 8pt;
                display: inline-block;
            }

            /* Typography optimization */
            p {
                orphans: 3;
                widows: 3;
                font-size: 11pt;
                line-height: 1.6;
            }

            /* Code and monospace */
            code, pre, .terminal-output {
                font-family: 'Courier New', monospace;
                font-size: 10pt;
                border: 1px solid #ccc;
                padding: 5pt;
                background: #f5f5f5 !important;
            }

            /* Print optimization */
            .tab-content {
                display: block !important;
            }

            .tab-content[style*="display: none"] {
                display: none !important;
            }

            /* Ensure visible content prints */
            .modal.active .modal-content {
                display: block !important;
                position: relative !important;
            }

            /* Chart placeholders */
            canvas {
                border: 1px solid black;
                background: white !important;
            }

            /* Clean spacing */
            .section-title {
                margin-top: 30pt;
                margin-bottom: 15pt;
                border-bottom: 1px solid black;
                padding-bottom: 8pt;
            }

            /* Print-specific utility */
            .print-only {
                display: block !important;
            }

            .no-print {
                display: none !important;
            }
        }
    </style>
</head>
<body>
    <!-- Matrix Rain Canvas -->
    <canvas id="matrix-canvas"></canvas>

    <!-- Scanline Effect -->
    <div class="scanline"></div>

    <!-- Boot Sequence Overlay -->
    <div class="boot-sequence" id="boot-sequence">
        <div class="boot-text" style="animation-delay: 0s;">INITIALIZING MATRIX SYSTEM...</div>
        <div class="boot-text" style="animation-delay: 0.5s;">LOADING CORE MODULES...</div>
        <div class="boot-text" style="animation-delay: 1s;">CONNECTING TO ORCHESTRATION LAYER...</div>
        <div class="boot-text" style="animation-delay: 1.5s;">ACTIVATING  AGENTS...</div>
        <div class="boot-text" style="animation-delay: 2s;">SYSTEM READY</div>
        <div class="boot-progress">
            <div class="boot-progress-bar"></div>
        </div>
    </div>

    <!-- Wake Up Neo Easter Egg -->
    <div class="wake-up-neo" id="wake-up-neo">
        WAKE UP, NEO...
    </div>

    <!-- Main Container -->
    <div class="container">
        <!-- Header -->
        <header>
            <h1 class="glitch">THE MATRIX</h1>
            <p class="tagline">AI ORCHESTRATION SYSTEM<span class="blinking-cursor">_</span></p>
            <p style="opacity: 0.6; font-size: 0.9rem; margin-top: 0.5rem;">N Agents × M Outcomes = Unlimited Scale</p>
            <p style="opacity: 0.6; font-size: 0.9rem; margin-top: 0.5rem;" id="matrix-time"></p>
        </header>

        <!-- System Status -->
        <div class="system-status">
            <div class="status-item">
                <div class="status-indicator active"></div>
                <span>ORCHESTRATOR: ONLINE</span>
            </div>
            <div class="status-item">
                <div class="status-indicator active"></div>
                <span>CONTEXT: 200K TOKENS</span>
            </div>
            <div class="status-item">
                <div class="status-indicator active"></div>
                <span>AGENTS: UNLIMITED</span>
            </div>
            <div class="status-item">
                <div class="status-indicator standby"></div>
                <span>PARALLEL EXEC: READY</span>
            </div>
        </div>

        <!-- Main CTA -->
        <div class="main-cta">
            <button class="enter-button" onclick="enterMatrix()">
                <span>ENTER THE MATRIX</span>
            </button>
        </div>

        <!-- Content Navigator Section -->
        <section class="capabilities-section">
            <h2 class="section-title breathing">MATRIX CONTENT LIBRARY</h2>
            <p style="text-align: center; opacity: 0.8; margin-bottom: 2rem; font-size: 1.1rem;">
                Explore demonstrations, documentation, and mind-blowing orchestration prompts
            </p>

            <!-- Search Bar -->
            <div class="search-container">
                <input
                    type="text"
                    id="global-search"
                    class="search-input"
                    placeholder="🔍 Search prompts, demos, docs..."
                    oninput="globalSearch(this.value)"
                />
                <div id="search-results" class="search-results"></div>
            </div>

            <!-- Tab Navigation -->
            <div class="content-tabs">
                <button class="tab-button active" onclick="switchTab('prompts')">MIND-BLOWING PROMPTS</button>
                <button class="tab-button" onclick="switchTab('demos')">INTERACTIVE DEMOS</button>
                <button class="tab-button" onclick="switchTab('docs')">DOCUMENTATION</button>
                <button class="tab-button" onclick="switchTab('apps')">LOCAL APPS</button>
                <button class="tab-button" onclick="switchTab('library')">PROMPT LIBRARY</button>
                <button class="tab-button" onclick="switchTab('builder')">PROMPT BUILDER</button>
                <button class="tab-button" onclick="switchTab('analytics')">ANALYTICS</button>
                <button class="tab-button" onclick="switchTab('compare')">COMPARE</button>
            </div>
        </section>

        <!-- Tab Content: Mind-Blowing Prompts -->
        <section class="tab-content active" id="prompts-tab">
            <h2 class="section-title breathing">10 MIND-BLOWING ORCHESTRATION PROMPTS</h2>
            <p style="text-align: center; opacity: 0.8; margin-bottom: 3rem; font-size: 1.1rem;">
                These prompts showcase The Matrix's power to orchestrate parallel agents across any domain
            </p>
            <div class="capabilities-grid">
                <!-- 1. The Great Migration -->
                <div class="capability-card" onclick="openModal('great-migration')">
                    <div class="capability-header">
                        <div class="capability-title">The Great Migration</div>
                        <div class="capability-status ready">READY</div>
                    </div>
                    <div class="capability-description">
                        Transform 2,500 legacy PHP files into modern React/TypeScript components with 100% test coverage. Each of 250 agents handles 10 files independently.
                    </div>
                    <div class="capability-stats">
                        <span>250 Agents</span>
                        <span>2,500 Files</span>
                        <span>15 Minutes</span>
                    </div>
                </div>

                <!-- 2. Documentation Engine -->
                <div class="capability-card" onclick="openModal('documentation-engine')">
                    <div class="capability-header">
                        <div class="capability-title">Documentation Engine</div>
                        <div class="capability-status ready">READY</div>
                    </div>
                    <div class="capability-description">
                        Generate complete technical documentation for 3,500 codebase files across 50 microservices. Auto-generated API references, tutorials, and navigation.
                    </div>
                    <div class="capability-stats">
                        <span>350 Agents</span>
                        <span>400 Doc Pages</span>
                        <span>18 Minutes</span>
                    </div>
                </div>

                <!-- 3. Knowledge Synthesizer -->
                <div class="capability-card" onclick="openModal('knowledge-synthesizer')">
                    <div class="capability-header">
                        <div class="capability-title">Knowledge Synthesizer</div>
                        <div class="capability-status ready">READY</div>
                    </div>
                    <div class="capability-description">
                        Analyze 75 academic research papers and generate 200 comprehensive articles, 500 concept cards, and a 10,000-node knowledge graph with interconnected insights.
                    </div>
                    <div class="capability-stats">
                        <span>15 Agents</span>
                        <span>700 Artifacts</span>
                        <span>12 Minutes</span>
                    </div>
                </div>

                <!-- 4. Automation Orchestrator -->
                <div class="capability-card" onclick="openModal('automation-orchestrator')">
                    <div class="capability-header">
                        <div class="capability-title">Automation Orchestrator</div>
                        <div class="capability-status ready">READY</div>
                    </div>
                    <div class="capability-description">
                        Design 50 business processes and generate 300 workflow automation scripts, 150 integration connectors, and 500 validation rules with monitoring dashboards.
                    </div>
                    <div class="capability-stats">
                        <span>50 Agents</span>
                        <span>950 Artifacts</span>
                        <span>10 Minutes</span>
                    </div>
                </div>

                <!-- 5. Universe Architect -->
                <div class="capability-card" onclick="openModal('universe-architect')">
                    <div class="capability-header">
                        <div class="capability-title">Universe Architect</div>
                        <div class="capability-status ready">READY</div>
                    </div>
                    <div class="capability-description">
                        Take a single story premise and generate a complete fictional universe: 300 world elements, 200 character profiles, 100 locations, 500 plot threads—all interconnected.
                    </div>
                    <div class="capability-stats">
                        <span>10 Agents</span>
                        <span>1,100 Elements</span>
                        <span>20 Minutes</span>
                    </div>
                </div>

                <!-- 6. System Designer -->
                <div class="capability-card" onclick="openModal('system-designer')">
                    <div class="capability-header">
                        <div class="capability-title">System Designer</div>
                        <div class="capability-status ready">READY</div>
                    </div>
                    <div class="capability-description">
                        Convert requirements into complete system architecture: 100 API specifications, 500 database schemas, 200 service blueprints, 1,000 deployment configurations.
                    </div>
                    <div class="capability-stats">
                        <span>100 Agents</span>
                        <span>1,800 Specs</span>
                        <span>14 Minutes</span>
                    </div>
                </div>

                <!-- 7. Data Warehouse Genesis -->
                <div class="capability-card" onclick="openModal('data-warehouse-genesis')">
                    <div class="capability-header">
                        <div class="capability-title">Data Warehouse Genesis</div>
                        <div class="capability-status ready">READY</div>
                    </div>
                    <div class="capability-description">
                        Design and generate 2,000 ETL pipelines, 5,000 dbt models, 500 data quality frameworks, and 1,000 monitoring dashboards from 100 source systems.
                    </div>
                    <div class="capability-stats">
                        <span>100 Agents</span>
                        <span>8,500 Artifacts</span>
                        <span>25 Minutes</span>
                    </div>
                </div>

                <!-- 8. API Universe -->
                <div class="capability-card" onclick="openModal('api-universe')">
                    <div class="capability-header">
                        <div class="capability-title">The Infinite API</div>
                        <div class="capability-status ready">READY</div>
                    </div>
                    <div class="capability-description">
                        Generate 10,000 RESTful endpoints across 200 microservices with complete OpenAPI specs, 10,000 unit tests, 5,000 integration tests, and SDK libraries in 8 languages.
                    </div>
                    <div class="capability-stats">
                        <span>200 Agents</span>
                        <span>25,000+ Artifacts</span>
                        <span>22 Minutes</span>
                    </div>
                </div>

                <!-- 9. Test Cathedral -->
                <div class="capability-card" onclick="openModal('test-cathedral')">
                    <div class="capability-header">
                        <div class="capability-title">Test Cathedral</div>
                        <div class="capability-status ready">READY</div>
                    </div>
                    <div class="capability-description">
                        Generate 10,000+ unit tests, 5,000 integration tests, and 1,000 end-to-end tests for a massive codebase with full coverage reports and CI/CD integration.
                    </div>
                    <div class="capability-stats">
                        <span>200 Agents</span>
                        <span>16,000 Tests</span>
                        <span>16 Minutes</span>
                    </div>
                </div>

                <!-- 10. D&D Campaign Architect -->
                <div class="capability-card" onclick="openModal('dnd-campaign')">
                    <div class="capability-header">
                        <div class="capability-title">D&D Campaign Architect</div>
                        <div class="capability-status ready">READY</div>
                    </div>
                    <div class="capability-description">
                        Create a complete 20-session D&D campaign with 100+ NPCs, 50+ unique locations, encounter design, treasure systems, and dynamic plot threads responding to player choices.
                    </div>
                    <div class="capability-stats">
                        <span>10 Agents</span>
                        <span>500+ Elements</span>
                        <span>18 Minutes</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Tab Content: Interactive Demos -->
        <section class="tab-content" id="demos-tab">
            <h2 class="section-title">INTERACTIVE DEMONSTRATIONS</h2>
            <p style="text-align: center; opacity: 0.8; margin-bottom: 3rem; font-size: 1.1rem;">
                Experience The Matrix through interactive HTML demonstrations
            </p>
            <div class="capabilities-grid" id="demos-grid">
                <!-- Demos will be dynamically loaded from data/config/demos_config.json -->
            </div>
        </section>

        <!-- Tab Content: Documentation -->
        <section class="tab-content" id="docs-tab">
            <h2 class="section-title">DOCUMENTATION</h2>
            <p style="text-align: center; opacity: 0.8; margin-bottom: 3rem; font-size: 1.1rem;">
                Comprehensive guides and documentation for The Matrix orchestration system
            </p>
            <div class="capabilities-grid">
                <div class="capability-card" onclick="openDocModal('README.md')">
                    <div class="capability-header">
                        <div class="capability-title">Framework Overview</div>
                        <div class="capability-status ready">AVAILABLE</div>
                    </div>
                    <div class="capability-description">
                        Complete overview of The Matrix AI orchestration framework, architecture, and capabilities.
                    </div>
                    <div class="capability-stats">
                        <span>README.md</span>
                        <span>Core Documentation</span>
                    </div>
                </div>

                <div class="capability-card" onclick="openDocModal('CLAUDE.md')">
                    <div class="capability-header">
                        <div class="capability-title">Orchestrator Guide</div>
                        <div class="capability-status ready">AVAILABLE</div>
                    </div>
                    <div class="capability-description">
                        Detailed workflow and instructions for Claude Code orchestrator. Learn how to coordinate parallel agents.
                    </div>
                    <div class="capability-stats">
                        <span>CLAUDE.md</span>
                        <span>Workflow Guide</span>
                    </div>
                </div>

                <div class="capability-card" onclick="openDocModal('CATHEDRAL_EXECUTIVE_SUMMARY.md')">
                    <div class="capability-header">
                        <div class="capability-title">Cathedral Executive Summary</div>
                        <div class="capability-status ready">AVAILABLE</div>
                    </div>
                    <div class="capability-description">
                        High-level overview of the Cathedral demonstration project showcasing orchestration capabilities.
                    </div>
                    <div class="capability-stats">
                        <span>Executive Summary</span>
                        <span>Cathedral Project</span>
                    </div>
                </div>

                <div class="capability-card" onclick="alert('View more documentation files in the repository')">
                    <div class="capability-header">
                        <div class="capability-title">More Documentation</div>
                        <div class="capability-status ready">17 FILES</div>
                    </div>
                    <div class="capability-description">
                        Additional documentation including strategy guides, metrics, visual guides, and recommendations.
                    </div>
                    <div class="capability-stats">
                        <span>17 Markdown Files</span>
                        <span>Various Topics</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Tab Content: Local Apps -->
        <section class="tab-content" id="apps-tab">
            <h2 class="section-title breathing">LOCAL APPS</h2>
            <p style="text-align: center; opacity: 0.8; margin-bottom: 1rem; font-size: 1.1rem;">
                100+ Self-Contained HTML Tools - Games, Development, AI, Business & More
            </p>

            <!-- Apps Gallery CTA -->
            <div style="text-align: center; margin-bottom: 3rem;">
                <a href="apps-gallery.html" style="display: inline-block; padding: 1.2rem 3rem; background: linear-gradient(135deg, var(--matrix-green) 0%, var(--matrix-dark-green) 100%); color: var(--deep-black); font-size: 1.2rem; font-weight: bold; text-decoration: none; border-radius: 10px; box-shadow: 0 0 30px var(--glow-green); transition: all 0.3s ease; border: 2px solid var(--matrix-green);">
                    🚀 OPEN FULL APPS GALLERY →
                </a>
                <p style="margin-top: 1rem; opacity: 0.7; font-size: 0.9rem;">
                    Browse all 100+ apps with advanced search, filtering, and categorization
                </p>
            </div>

            <!-- App Statistics Badge -->
            <div class="stats-badge" id="app-stats" style="top: auto; bottom: 2rem; left: 2rem;">
                <h4>APP STATISTICS</h4>
                <div class="stat-row">
                    <span>Total Apps:</span>
                    <span class="stat-value" id="total-apps-count">0</span>
                </div>
                <div class="stat-row">
                    <span>Showing:</span>
                    <span class="stat-value" id="filtered-apps-count">0</span>
                </div>
                <div class="stat-row">
                    <span>Categories:</span>
                    <span class="stat-value" id="categories-count">0</span>
                </div>
            </div>

            <!-- Search and Filters -->
            <div class="filter-panel">
                <div class="filter-group">
                    <label class="filter-label">SEARCH APPS</label>
                    <input
                        type="text"
                        id="app-search-input"
                        placeholder="Search by name, description, or tags..."
                        style="width: 100%; padding: 0.8rem; background: rgba(0, 0, 0, 0.5); border: 2px solid var(--glass-border); border-radius: 5px; color: var(--matrix-green); font-family: 'Courier New', Consolas, monospace; font-size: 0.95rem;"
                        oninput="filterApps()"
                    >
                </div>

                <div class="filter-group">
                    <label class="filter-label">FILTER BY CATEGORY</label>
                    <div class="filter-pills" id="category-filters">
                        <!-- Category pills will be dynamically added here -->
                    </div>
                </div>

                <div class="filter-group">
                    <label class="filter-label">LAUNCH PREFERENCE</label>
                    <div class="filter-pills">
                        <button class="filter-pill active" id="launch-modal-btn" onclick="setLaunchMode('modal')">📱 MODAL</button>
                        <button class="filter-pill" id="launch-window-btn" onclick="setLaunchMode('window')">🪟 NEW WINDOW</button>
                    </div>
                </div>
            </div>

            <!-- Apps Grid -->
            <div class="capabilities-grid" id="apps-grid">
                <!-- App cards will be dynamically added here -->
            </div>

            <!-- Loading indicator -->
            <div id="apps-loading" style="text-align: center; padding: 3rem; opacity: 0.8;">
                <div style="font-size: 2rem; margin-bottom: 1rem;">⚡</div>
                <div>Loading local apps...</div>
            </div>

            <!-- No results message -->
            <div id="apps-no-results" style="text-align: center; padding: 3rem; opacity: 0.8; display: none;">
                <div style="font-size: 2rem; margin-bottom: 1rem;">🔍</div>
                <div>No apps match your search criteria</div>
            </div>
        </section>

        <!-- Tab Content: Prompt Library -->
        <section class="tab-content" id="library-tab">
            <h2 class="section-title">PROMPT LIBRARY</h2>
            <p style="text-align: center; opacity: 0.8; margin-bottom: 1rem; font-size: 1.1rem;">
                Curated collection of orchestration prompts across different domains
            </p>

            <!-- Data Status and Refresh -->
            <div style="text-align: center; margin-bottom: 1.5rem;">
                <button onclick="refreshPromptData()"
                        style="background: rgba(0, 255, 65, 0.1); color: var(--matrix-green); border: 1px solid var(--matrix-green);
                               padding: 0.5rem 1rem; font-family: 'Courier New', Consolas, monospace;
                               font-size: 0.8rem; cursor: pointer; border-radius: 3px; transition: all 0.3s ease;"
                        onmouseover="this.style.background='var(--matrix-green)'; this.style.color='var(--deep-black)';"
                        onmouseout="this.style.background='rgba(0, 255, 65, 0.1)'; this.style.color='var(--matrix-green)';">
                    🔄 REFRESH DATA FROM GITHUB
                </button>
                <div id="data-status" style="margin-top: 0.5rem; font-size: 0.75rem; opacity: 0.6;">
                    Loading data from repository...
                </div>
            </div>

            <!-- Prompt Library Sub-tabs -->
            <div class="prompt-library-tabs">
                <button class="prompt-tab-button active" data-category="ultimate" onclick="switchPromptCategory('ultimate')">⚡ ULTIMATE</button>
                <button class="prompt-tab-button" data-category="scale" onclick="switchPromptCategory('scale')">SCALE-FIRST</button>
                <button class="prompt-tab-button" data-category="ux" onclick="switchPromptCategory('ux')">USER EXPERIENCE</button>
                <button class="prompt-tab-button" data-category="creative" onclick="switchPromptCategory('creative')">CREATIVE</button>
                <button class="prompt-tab-button" data-category="business" onclick="switchPromptCategory('business')">BUSINESS IMPACT</button>
            </div>

            <!-- Prompt library content will be dynamically loaded -->
            <div id="prompt-library-content" class="capabilities-grid" style="margin-top: 2rem;">
                <!-- Dynamically populated by JavaScript -->
            </div>
        </section>

        <!-- Tab Content: Prompt Builder -->
        <section class="tab-content" id="builder-tab">
            <h2 class="section-title">PROMPT BUILDER</h2>
            <p style="text-align: center; opacity: 0.8; margin-bottom: 3rem; font-size: 1.1rem;">
                Customize and generate your own orchestration prompts
            </p>

            <div class="builder-container">
                <div class="builder-form">
                    <div class="form-group">
                        <label>Domain / Category</label>
                        <select id="builder-domain" class="builder-input">
                            <option value="software">Software Development</option>
                            <option value="content">Content Creation</option>
                            <option value="data">Data Engineering</option>
                            <option value="creative">Creative Writing</option>
                            <option value="business">Business Process</option>
                            <option value="infrastructure">Infrastructure</option>
                            <option value="testing">Quality Assurance</option>
                            <option value="design">Design System</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Number of Agents (N)</label>
                        <input type="number" id="builder-agents" class="builder-input" value="10" min="1" max="500">
                        <span class="hint">Parallel agents working simultaneously</span>
                    </div>

                    <div class="form-group">
                        <label>Outcomes per Agent (M)</label>
                        <input type="number" id="builder-outcomes" class="builder-input" value="5" min="1" max="100">
                        <span class="hint">Artifacts generated by each agent</span>
                    </div>

                    <div class="form-group">
                        <label>Project Description</label>
                        <textarea id="builder-description" class="builder-textarea" rows="4" placeholder="Describe your project and what you want to generate..."></textarea>
                    </div>

                    <div class="form-group">
                        <label>Output Type</label>
                        <input type="text" id="builder-output" class="builder-input" placeholder="e.g., API endpoints, React components, documentation pages...">
                    </div>

                    <div class="form-group">
                        <label>Special Requirements</label>
                        <textarea id="builder-requirements" class="builder-textarea" rows="3" placeholder="Technical stack, patterns, constraints..."></textarea>
                    </div>

                    <button class="builder-generate-btn" onclick="generatePrompt()">
                        ⚡ GENERATE PROMPT
                    </button>
                </div>

                <div class="builder-output">
                    <h3>Generated Orchestration Prompt</h3>
                    <div id="generated-prompt" class="prompt-output">
                        <p style="opacity: 0.6; text-align: center; padding: 2rem;">
                            Fill in the form and click "Generate Prompt" to create your custom orchestration prompt
                        </p>
                    </div>
                    <div class="builder-actions" id="builder-actions" style="display: none;">
                        <button class="action-btn" onclick="copyPrompt()">📋 COPY TO CLIPBOARD</button>
                        <button class="action-btn" onclick="downloadPrompt()">💾 DOWNLOAD</button>
                        <button class="action-btn" onclick="sharePrompt()">🔗 SHARE</button>
                    </div>

                    <div class="estimated-metrics" id="estimated-metrics" style="display: none;">
                        <h4>Estimated Metrics</h4>
                        <div class="metrics-grid">
                            <div class="metric-item">
                                <span class="metric-value" id="total-artifacts">0</span>
                                <span class="metric-label">Total Artifacts</span>
                            </div>
                            <div class="metric-item">
                                <span class="metric-value" id="estimated-time">0</span>
                                <span class="metric-label">Est. Time (min)</span>
                            </div>
                            <div class="metric-item">
                                <span class="metric-value" id="speedup-factor">0x</span>
                                <span class="metric-label">Speedup vs Sequential</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Tab Content: Analytics Dashboard -->
        <section class="tab-content" id="analytics-tab">
            <h2 class="section-title">ORCHESTRATION ANALYTICS</h2>
            <p style="text-align: center; opacity: 0.8; margin-bottom: 3rem; font-size: 1.1rem;">
                Visualize the power of parallel agent orchestration
            </p>

            <div class="analytics-dashboard">
                <!-- Summary Stats -->
                <div class="stats-row">
                    <div class="stat-card">
                        <div class="stat-icon">🚀</div>
                        <div class="stat-value">30+</div>
                        <div class="stat-label">Total Prompts</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">🤖</div>
                        <div class="stat-value">2,500+</div>
                        <div class="stat-label">Max Agents</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">⚡</div>
                        <div class="stat-value">25,000+</div>
                        <div class="stat-label">Max Artifacts</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">⏱️</div>
                        <div class="stat-value">25min</div>
                        <div class="stat-label">Longest Process</div>
                    </div>
                </div>

                <!-- Comparison Visualization -->
                <div class="comparison-section">
                    <h3>Sequential vs Parallel Execution</h3>
                    <div class="comparison-bars">
                        <div class="comparison-item">
                            <div class="comparison-label">Sequential Execution</div>
                            <div class="comparison-bar sequential">
                                <div class="bar-fill" style="width: 100%;"></div>
                                <span class="bar-text">2,500 hours (104 days)</span>
                            </div>
                        </div>
                        <div class="comparison-item">
                            <div class="comparison-label">Parallel Orchestration</div>
                            <div class="comparison-bar parallel">
                                <div class="bar-fill" style="width: 1%;"></div>
                                <span class="bar-text">15 minutes</span>
                            </div>
                        </div>
                        <div class="speedup-indicator">
                            <span class="speedup-value">10,000x</span>
                            <span class="speedup-label">Faster</span>
                        </div>
                    </div>
                </div>

                <!-- Domain Distribution -->
                <div class="domain-distribution">
                    <h3>Prompts by Domain</h3>
                    <div class="domain-chart">
                        <div class="domain-bar" style="--percentage: 30%;">
                            <span class="domain-name">Software Dev</span>
                            <span class="domain-count">9</span>
                        </div>
                        <div class="domain-bar" style="--percentage: 25%;">
                            <span class="domain-name">Creative</span>
                            <span class="domain-count">8</span>
                        </div>
                        <div class="domain-bar" style="--percentage: 20%;">
                            <span class="domain-name">User Experience</span>
                            <span class="domain-count">6</span>
                        </div>
                        <div class="domain-bar" style="--percentage: 15%;">
                            <span class="domain-name">Data/Infrastructure</span>
                            <span class="domain-count">5</span>
                        </div>
                        <div class="domain-bar" style="--percentage: 10%;">
                            <span class="domain-name">Business</span>
                            <span class="domain-count">3</span>
                        </div>
                    </div>
                </div>

                <!-- Agent Distribution -->
                <div class="agent-visualization">
                    <h3>Agent Scale Distribution</h3>
                    <div class="agent-scale-chart">
                        <div class="scale-segment" style="--size: 15%;" title="1-10 agents">
                            <span>Small<br>1-10</span>
                        </div>
                        <div class="scale-segment" style="--size: 35%;" title="10-50 agents">
                            <span>Medium<br>10-50</span>
                        </div>
                        <div class="scale-segment" style="--size: 30%;" title="50-100 agents">
                            <span>Large<br>50-100</span>
                        </div>
                        <div class="scale-segment" style="--size: 20%;" title="100+ agents">
                            <span>Massive<br>100+</span>
                        </div>
                    </div>
                </div>

                <!-- Time Efficiency -->
                <div class="efficiency-matrix">
                    <h3>Time Efficiency Matrix</h3>
                    <table class="efficiency-table">
                        <thead>
                            <tr>
                                <th>Scale</th>
                                <th>Artifacts</th>
                                <th>Agents</th>
                                <th>Time</th>
                                <th>Efficiency</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Small</td>
                                <td>50-100</td>
                                <td>5-10</td>
                                <td>8-12 min</td>
                                <td class="efficiency-high">⚡⚡⚡</td>
                            </tr>
                            <tr>
                                <td>Medium</td>
                                <td>500-1,000</td>
                                <td>50-100</td>
                                <td>12-18 min</td>
                                <td class="efficiency-high">⚡⚡⚡</td>
                            </tr>
                            <tr>
                                <td>Large</td>
                                <td>5,000-10,000</td>
                                <td>100-200</td>
                                <td>18-22 min</td>
                                <td class="efficiency-medium">⚡⚡</td>
                            </tr>
                            <tr>
                                <td>Massive</td>
                                <td>10,000+</td>
                                <td>200-500</td>
                                <td>22-25 min</td>
                                <td class="efficiency-medium">⚡⚡</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- Tab Content: Prompt Comparison -->
        <section class="tab-content" id="compare-tab">
            <h2 class="section-title">⚖️ PROMPT COMPARISON</h2>
            <p style="text-align: center; opacity: 0.8; margin-bottom: 2rem; font-size: 1.1rem;">
                Compare two prompts side-by-side to find the best fit for your project
            </p>

            <div class="comparison-controls">
                <div class="comparison-selector">
                    <label>Select Prompt A:</label>
                    <select id="compare-prompt-a" class="comparison-select" onchange="updateComparison()">
                        <option value="">-- Choose a prompt --</option>
                        <option value="great-migration">The Great Migration</option>
                        <option value="documentation-engine">Documentation Engine</option>
                        <option value="knowledge-synthesizer">Knowledge Synthesizer</option>
                        <option value="automation-orchestrator">Automation Orchestrator</option>
                        <option value="universe-architect">Universe Architect</option>
                        <option value="system-designer">System Designer</option>
                        <option value="data-warehouse-genesis">Data Warehouse Genesis</option>
                        <option value="api-universe">The Infinite API</option>
                        <option value="test-cathedral">Test Cathedral</option>
                        <option value="dnd-campaign">D&D Campaign Architect</option>
                    </select>
                </div>

                <div class="vs-indicator">VS</div>

                <div class="comparison-selector">
                    <label>Select Prompt B:</label>
                    <select id="compare-prompt-b" class="comparison-select" onchange="updateComparison()">
                        <option value="">-- Choose a prompt --</option>
                        <option value="great-migration">The Great Migration</option>
                        <option value="documentation-engine">Documentation Engine</option>
                        <option value="knowledge-synthesizer">Knowledge Synthesizer</option>
                        <option value="automation-orchestrator">Automation Orchestrator</option>
                        <option value="universe-architect">Universe Architect</option>
                        <option value="system-designer">System Designer</option>
                        <option value="data-warehouse-genesis">Data Warehouse Genesis</option>
                        <option value="api-universe">The Infinite API</option>
                        <option value="test-cathedral">Test Cathedral</option>
                        <option value="dnd-campaign">D&D Campaign Architect</option>
                    </select>
                </div>
            </div>

            <div class="comparison-container" id="comparison-display">
                <div class="comparison-slot">
                    <div class="placeholder-text">
                        ⬆️ Select Prompt A above to compare
                    </div>
                </div>
                <div class="comparison-slot">
                    <div class="placeholder-text">
                        ⬆️ Select Prompt B above to compare
                    </div>
                </div>
            </div>

            <div id="comparison-verdict" class="comparison-verdict" style="display: none;">
                <h3>📊 Comparison Summary</h3>
                <div class="verdict-content">
                    <!-- Dynamically filled by JavaScript -->
                </div>
            </div>
        </section>

        <!-- Terminal Section -->
        <section class="terminal-section">
            <h2 class="section-title">SYSTEM TERMINAL</h2>
            <div class="terminal">
                <div class="terminal-header">
                    <div class="terminal-dot dot-red"></div>
                    <div class="terminal-dot dot-yellow"></div>
                    <div class="terminal-dot dot-green"></div>
                    <div class="terminal-title">matrix-terminal v1.0.0</div>
                </div>
                <div class="terminal-output" id="terminal-output">
                    <div class="terminal-line">
                        <span class="terminal-prompt">matrix@system:~$</span> Welcome to The Matrix  Orchestration System
                    </div>
                    <div class="terminal-line">
                        <span class="terminal-prompt">matrix@system:~$</span> System initialized successfully
                    </div>
                    <div class="terminal-line">
                        <span class="terminal-prompt">matrix@system:~$</span> Type 'help' for available commands
                    </div>
                </div>
                <div class="terminal-input-line">
                    <span class="terminal-prompt">matrix@system:~$</span>
                    <input
                        type="text"
                        class="terminal-input"
                        id="terminal-input"
                        placeholder="Enter command..."
                        autocomplete="off"
                    />
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer>
            <p>&copy; 2025 THE MATRIX |  Orchestration System</p>
            <div class="footer-info">
                <span>Version 1.0.0</span>
                <span>|</span>
                <span>Claude Code Powered</span>
                <span>|</span>
                <span>200k Context Window</span>
                <span>|</span>
                <span>10 Parallel Agents</span>
            </div>
        </footer>
    </div>

    <!-- Modal -->
    <div class="modal" id="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="modal-title">Module Details</h2>
                <button class="close-modal" onclick="closeModal()">CLOSE</button>
            </div>
            <div class="modal-body" id="modal-body">
                <!-- Content injected by JavaScript -->
            </div>
        </div>
    </div>

    <!-- App Modal (for iframe display) -->
    <div class="modal" id="app-modal">
        <div class="modal-content" style="max-width: 90vw; max-height: 90vh; width: 100%; height: 90vh; padding: 0; overflow: hidden;">
            <div class="modal-header" style="padding: 1rem 2rem; margin: 0; border-radius: 10px 10px 0 0;">
                <h2 class="modal-title" id="app-modal-title">App Viewer</h2>
                <button class="close-modal" onclick="closeAppModal()">CLOSE</button>
            </div>
            <iframe
                id="app-modal-iframe"
                style="width: 100%; height: calc(100% - 80px); border: none; background: white;"
                sandbox="allow-scripts allow-same-origin allow-forms allow-popups allow-modals"
            ></iframe>
        </div>
    </div>

    <!-- Stats Badge -->
    <div class="stats-badge" id="stats-badge">
        <h4>📊 Your Activity</h4>
        <div class="stat-row">
            <span>Prompts Viewed:</span>
            <span class="stat-value" id="stat-viewed">0</span>
        </div>
        <div class="stat-row">
            <span>Copied:</span>
            <span class="stat-value" id="stat-copied">0</span>
        </div>
        <div class="stat-row">
            <span>Favorites:</span>
            <span class="stat-value" id="stat-favorites">0</span>
        </div>
        <div class="stat-row">
            <span>Built Custom:</span>
            <span class="stat-value" id="stat-built">0</span>
        </div>
        <div class="progress-container">
            <div class="progress-bar" id="exploration-progress"></div>
        </div>
        <div style="font-size: 0.75rem; opacity: 0.6; margin-top: 0.5rem; text-align: center;">
            <span id="progress-text">0% Explored</span>
        </div>
    </div>

    <!-- Keyboard Shortcuts Panel -->
    <div class="shortcuts-panel" id="shortcuts-panel">
        <h3>⌨️ Keyboard Shortcuts</h3>
        <div class="shortcut-item">
            <span class="shortcut-desc">Search</span>
            <span class="shortcut-key">Ctrl+K</span>
        </div>
        <div class="shortcut-item">
            <span class="shortcut-desc">Close Modal</span>
            <span class="shortcut-key">ESC</span>
        </div>
        <div class="shortcut-item">
            <span class="shortcut-desc">Builder Tab</span>
            <span class="shortcut-key">B</span>
        </div>
        <div class="shortcut-item">
            <span class="shortcut-desc">Analytics Tab</span>
            <span class="shortcut-key">A</span>
        </div>
        <div class="shortcut-item">
            <span class="shortcut-desc">Favorites</span>
            <span class="shortcut-key">F</span>
        </div>
        <div class="shortcut-item">
            <span class="shortcut-desc">Show Shortcuts</span>
            <span class="shortcut-key">?</span>
        </div>
        <div class="shortcut-item">
            <span class="shortcut-desc">Random Prompt</span>
            <span class="shortcut-key">R</span>
        </div>
        <div style="text-align: center; margin-top: 1rem;">
            <button class="action-btn" onclick="toggleShortcuts()">CLOSE</button>
        </div>
    </div>

    <!-- Floating Action Button -->
    <button class="fab" id="fab" onclick="toggleFabMenu()" title="Quick Actions">
        ⚡
    </button>

    <!-- FAB Menu (appears on click) -->
    <div id="fab-menu" style="display: none; position: fixed; bottom: 5rem; right: 2rem; z-index: 9997;">
        <div style="display: flex; flex-direction: column; gap: 0.5rem;">
            <button class="action-btn daily-challenge-btn" onclick="showDailyChallenge()" style="white-space: nowrap;">
                🎯 Daily Challenge <span id="challenge-indicator" style="display: none;">🔥</span>
            </button>
            <button class="action-btn" onclick="showFavorites()" style="white-space: nowrap;">
                ⭐ Favorites (<span id="fav-count">0</span>)
            </button>
            <button class="action-btn" onclick="showAchievements()" style="white-space: nowrap;">
                🏆 Achievements (<span id="achievement-count">0</span>/12)
            </button>
            <button class="action-btn" onclick="exportAllPrompts()" style="white-space: nowrap;">
                💾 Export All
            </button>
            <button class="action-btn" onclick="toggleShortcuts()" style="white-space: nowrap;">
                ⌨️ Shortcuts
            </button>
            <button class="action-btn" onclick="toggleThemeSelector()" style="white-space: nowrap;">
                🎨 Theme
            </button>
            <button class="action-btn" onclick="randomPrompt()" style="white-space: nowrap;">
                🎲 Random
            </button>
            <button class="action-btn" onclick="resetStats()" style="white-space: nowrap;">
                🔄 Reset Stats
            </button>
        </div>
    </div>

    <!-- Theme Selector Panel -->
    <div id="theme-selector" class="theme-selector-panel">
        <div class="theme-selector-content">
            <div class="theme-selector-header">
                <h3>🎨 SELECT THEME</h3>
                <button onclick="toggleThemeSelector()" class="close-theme-btn">✕</button>
            </div>
            <div class="theme-options">
                <div class="theme-option" data-theme="matrix-green" onclick="setTheme('matrix-green')">
                    <div class="theme-preview" style="background: linear-gradient(135deg, #0d0208 0%, #00ff41 100%);"></div>
                    <div class="theme-name">MATRIX GREEN</div>
                    <div class="theme-desc">Classic hacker aesthetic</div>
                </div>
                <div class="theme-option" data-theme="cyber-blue" onclick="setTheme('cyber-blue')">
                    <div class="theme-preview" style="background: linear-gradient(135deg, #020a0d 0%, #00d4ff 100%);"></div>
                    <div class="theme-name">CYBER BLUE</div>
                    <div class="theme-desc">Neon cyberpunk vibes</div>
                </div>
                <div class="theme-option" data-theme="alert-red" onclick="setTheme('alert-red')">
                    <div class="theme-preview" style="background: linear-gradient(135deg, #0d0202 0%, #ff0044 100%);"></div>
                    <div class="theme-name">ALERT RED</div>
                    <div class="theme-desc">Danger mode activated</div>
                </div>
                <div class="theme-option" data-theme="premium-gold" onclick="setTheme('premium-gold')">
                    <div class="theme-preview" style="background: linear-gradient(135deg, #0d0a02 0%, #ffd700 100%);"></div>
                    <div class="theme-name">PREMIUM GOLD</div>
                    <div class="theme-desc">Luxury elegance</div>
                </div>
                <div class="theme-option" data-theme="stealth-dark" onclick="setTheme('stealth-dark')">
                    <div class="theme-preview" style="background: linear-gradient(135deg, #000000 0%, #888888 100%);"></div>
                    <div class="theme-name">STEALTH DARK</div>
                    <div class="theme-desc">Minimalist shadow</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Daily Challenge Modal -->
    <div id="daily-challenge-modal" class="daily-challenge-modal">
        <div class="daily-challenge-content">
            <div class="daily-challenge-header">
                <h2>🎯 DAILY CHALLENGE</h2>
                <button onclick="closeDailyChallenge()" class="close-challenge-btn">✕</button>
            </div>

            <div class="challenge-date" id="challenge-date">Loading...</div>

            <div class="challenge-streak">
                <div class="streak-item">
                    <div class="streak-icon">🔥</div>
                    <div class="streak-label">Current Streak</div>
                    <div class="streak-value" id="current-streak">0</div>
                </div>
                <div class="streak-item">
                    <div class="streak-icon">🏆</div>
                    <div class="streak-label">Best Streak</div>
                    <div class="streak-value" id="best-streak">0</div>
                </div>
                <div class="streak-item">
                    <div class="streak-icon">✅</div>
                    <div class="streak-label">Total Completed</div>
                    <div class="streak-value" id="total-completed">0</div>
                </div>
            </div>

            <div class="challenge-prompt-card">
                <div class="challenge-label">TODAY'S PROMPT:</div>
                <h3 id="challenge-prompt-title">Loading...</h3>
                <p id="challenge-prompt-desc">Loading...</p>

                <div class="challenge-stats">
                    <div class="challenge-stat">
                        <span class="stat-label">Agents:</span>
                        <span class="stat-value" id="challenge-agents">0</span>
                    </div>
                    <div class="challenge-stat">
                        <span class="stat-label">Artifacts:</span>
                        <span class="stat-value" id="challenge-artifacts">0</span>
                    </div>
                    <div class="challenge-stat">
                        <span class="stat-label">Domain:</span>
                        <span class="stat-value" id="challenge-domain">-</span>
                    </div>
                </div>
            </div>

            <div class="challenge-actions">
                <button onclick="viewChallengePrompt()" class="challenge-action-btn view-btn">
                    👁️ View Details
                </button>
                <button onclick="completeDailyChallenge()" class="challenge-action-btn complete-btn" id="complete-challenge-btn">
                    ✅ Mark Complete
                </button>
            </div>

            <div class="challenge-status" id="challenge-status" style="display: none;">
                <div class="status-icon">🎉</div>
                <div class="status-text">Challenge Completed!</div>
                <div class="status-points">+50 XP  |  Streak: <span id="new-streak">1</span></div>
            </div>
        </div>
    </div>

    <!-- Achievement Notification -->
    <div id="achievement-notification" class="achievement-notification">
        <div class="achievement-icon" id="achievement-icon">🏆</div>
        <div class="achievement-title" id="achievement-title">Achievement Unlocked!</div>
        <div class="achievement-desc" id="achievement-desc">Description</div>
        <div class="achievement-progress" id="achievement-progress-text"></div>
    </div>

    <script>
        // Global error handler for The Matrix Gateway
        window.onerror = function(msg, url, lineNo, columnNo, error) {
            console.error('Matrix Error:', msg, '\nLine:', lineNo, '\nColumn:', columnNo);
            // Graceful degradation - show error notification but keep app functional
            try {
                const notification = document.createElement('div');
                notification.style.cssText = 'position:fixed;top:20px;right:20px;background:rgba(255,0,0,0.9);color:#fff;padding:15px 20px;border-radius:8px;z-index:10000;max-width:300px;font-family:monospace;font-size:0.9em;';
                notification.innerHTML = '<strong>⚠️ Error Detected</strong><br/>' + msg.substring(0, 100);
                document.body.appendChild(notification);
                setTimeout(() => notification.remove(), 5000);
            } catch (e) {
                // Fail silently if notification creation fails
            }
            return false;
        };

        // Promise rejection handler
        window.addEventListener('unhandledrejection', function(event) {
            console.error('Unhandled promise rejection:', event.reason);
        });

        // Matrix Rain Effect
        const canvas = document.getElementById('matrix-canvas');
        const ctx = canvas.getContext('2d');

        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        const characters = 'アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヲン0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ';
        const fontSize = 14;
        const columns = canvas.width / fontSize;
        const drops = Array(Math.floor(columns)).fill(1);

        function drawMatrix() {
            ctx.fillStyle = 'rgba(13, 2, 8, 0.05)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            ctx.fillStyle = '#00ff41';
            ctx.font = fontSize + 'px monospace';

            for (let i = 0; i < drops.length; i++) {
                const text = characters.charAt(Math.floor(Math.random() * characters.length));
                ctx.fillText(text, i * fontSize, drops[i] * fontSize);

                if (drops[i] * fontSize > canvas.height && Math.random() > 0.975) {
                    drops[i] = 0;
                }
                drops[i]++;
            }
        }

        setInterval(drawMatrix, 35);

        // Resize canvas on window resize
        window.addEventListener('resize', () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        });

        // Boot Sequence
        setTimeout(() => {
            const bootSequence = document.getElementById('boot-sequence');
            bootSequence.style.opacity = '0';
            bootSequence.style.transition = 'opacity 0.5s';
            setTimeout(() => {
                bootSequence.style.display = 'none';
            }, 500);
        }, 3500);

        // Matrix Time Display
        function updateMatrixTime() {
            const now = new Date();
            const timeString = now.toLocaleTimeString('en-US', { hour12: false });
            const dateString = now.toLocaleDateString('en-US', {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
            document.getElementById('matrix-time').textContent =
                `CURRENT TIME IN THE MATRIX: ${timeString} | ${dateString}`;
        }
        updateMatrixTime();
        setInterval(updateMatrixTime, 1000);

        // Terminal Commands
        const terminalInput = document.getElementById('terminal-input');
        const terminalOutput = document.getElementById('terminal-output');

        const commands = {
            help: `Available commands:
> help - Display this help message
> status - Show system status
> agents - List available agents
> pillars - Show content pillars
> generate - Start  page generation
> clear - Clear terminal
> wake-up - ???`,
            status: `SYSTEM STATUS:
> Orchestrator: ONLINE
> Agents Ready: 10/10
> Database: CONNECTED
> Pages Generated: 0/50
> Last Operation: System Initialized
> Uptime: ${Math.floor(Math.random() * 100)} hours`,
            agents: `AVAILABLE AGENTS:
> -designer (x10) - Generate -optimized landing pages
> header-footer (x1) - Create navigation and routing
> Status: All agents ready for deployment`,
            pillars: `CONTENT PILLAR STRATEGY:
> 10 Main Pillars
> 50 Subpillar Topics (5 per pillar)
> -Optimized Keywords
> Conversion-Focused CTAs
> Internal Linking Structure
> Run 'generate' to create pages`,
            generate: `INITIATING PAGE GENERATION:
> Spawning 10 design agents...
> Analyzing project documentation...
> Extracting design system...
> Generating content strategy...
> This is a demo. Connect to actual system for live generation.`,
            clear: 'CLEAR',
            'wake-up': 'WAKE_UP_NEO',
            neo: 'WAKE_UP_NEO',
            matrix: `You take the blue pill - the story ends, you wake up in your bed and believe whatever you want to believe.
You take the red pill - you stay in Wonderland and I show you how deep the rabbit hole goes.`,
            'follow-the-white-rabbit': 'KNOCK KNOCK, NEO...',
            konami: 'KONAMI CODE ACTIVATED!'
        };

        terminalInput.addEventListener('keydown', function(e) {
            if (e.key === 'Enter') {
                const command = this.value.trim().toLowerCase();
                const output = commands[command] || `Command not found: ${command}. Type 'help' for available commands.`;

                if (output === 'CLEAR') {
                    terminalOutput.innerHTML = '';
                } else if (output === 'WAKE_UP_NEO') {
                    showWakeUpNeo();
                } else {
                    const lines = output.split('\n');
                    lines.forEach(line => {
                        const lineDiv = document.createElement('div');
                        lineDiv.className = 'terminal-line';
                        lineDiv.innerHTML = `<span class="terminal-prompt">matrix@system:~$</span> ${line}`;
                        terminalOutput.appendChild(lineDiv);
                    });
                }

                terminalOutput.scrollTop = terminalOutput.scrollHeight;
                this.value = '';
            }
        });

        // Wake Up Neo Easter Egg
        function showWakeUpNeo() {
            const wakeUpNeo = document.getElementById('wake-up-neo');
            wakeUpNeo.classList.add('active');
            setTimeout(() => {
                wakeUpNeo.classList.remove('active');
            }, 3000);
        }

        // Konami Code Easter Egg
        let konamiCode = [];
        const konamiSequence = ['ArrowUp', 'ArrowUp', 'ArrowDown', 'ArrowDown', 'ArrowLeft', 'ArrowRight', 'ArrowLeft', 'ArrowRight', 'b', 'a'];

        function activateKonamiMode() {
            // Show massive emoji
            const emoji = document.createElement('div');
            emoji.className = 'konami-mode';
            emoji.textContent = '🎮';
            document.body.appendChild(emoji);

            setTimeout(() => {
                document.body.removeChild(emoji);
            }, 2000);

            // Activate glitch effect
            document.body.classList.add('glitch-active');
            setTimeout(() => {
                document.body.classList.remove('glitch-active');
            }, 3000);

            // Matrix rain speed boost
            for (let i = 0; i < drops.length; i++) {
                setTimeout(() => {
                    drops[i] = Math.random() * (canvas.height / fontSize);
                }, i * 10);
            }

            showNotification('🎮 KONAMI CODE ACTIVATED! THE MATRIX IS GLITCHING!');

            // Unlock secret achievement
            const stats = getStats();
            stats.konami_activated = true;
            saveStats(stats);
        }

        document.addEventListener('keydown', (e) => {
            konamiCode.push(e.key);
            konamiCode = konamiCode.slice(-10);

            if (konamiCode.join(',') === konamiSequence.join(',')) {
                activateKonamiMode();
                showWakeUpNeo();
                const lineDiv = document.createElement('div');
                lineDiv.className = 'terminal-line';
                lineDiv.innerHTML = `<span class="terminal-prompt">matrix@system:~$</span> ${commands.konami}`;
                terminalOutput.appendChild(lineDiv);
                terminalOutput.scrollTop = terminalOutput.scrollHeight;
                konamiCode = [];
            }
        });

        // Enter Matrix Button
        function enterMatrix() {
            const button = event.target.closest('.enter-button');
            button.style.transform = 'scale(0.95)';
            setTimeout(() => {
                button.style.transform = 'scale(1.05)';
            }, 100);

            // Scroll to capabilities
            document.querySelector('.capabilities-section').scrollIntoView({
                behavior: 'smooth'
            });

            // Update status
            const statusItems = document.querySelectorAll('.status-item');
            statusItems[3].innerHTML = `
                <div class="status-indicator active"></div>
                <span>GENERATION: ACTIVE</span>
            `;
        }

        // Modal System
        const modalData = {
            'great-migration': {
                title: 'The Great Migration',
                content: `
                    <h3>Overview</h3>
                    <p>Transform 2,500 legacy PHP files into modern React/TypeScript components with 100% test coverage in just 15 minutes.</p>

                    <h3>Orchestration Strategy</h3>
                    <ul>
                        <li>250 parallel agents, each handling 10 files</li>
                        <li>Source code analysis and pattern extraction</li>
                        <li>Automated dependency mapping</li>
                        <li>Test suite generation for each component</li>
                        <li>Consistent design patterns across all conversions</li>
                    </ul>

                    <h3>Output</h3>
                    <ul>
                        <li>2,500 modern React/TypeScript components</li>
                        <li>2,500 comprehensive test suites</li>
                        <li>Dependency graph documentation</li>
                        <li>Migration report with statistics</li>
                    </ul>

                    <h3>Domain</h3>
                    <p>Software Development - Code Migration</p>
                `
            },
            'documentation-engine': {
                title: 'Documentation Engine',
                content: `
                    <h3>Overview</h3>
                    <p>Generate complete technical documentation for 3,500 codebase files across 50 microservices in 18 minutes.</p>

                    <h3>Orchestration Strategy</h3>
                    <ul>
                        <li>350 parallel agents analyzing codebase</li>
                        <li>Auto-extract API endpoints and schemas</li>
                        <li>Generate tutorials and getting started guides</li>
                        <li>Create cross-service navigation and references</li>
                        <li>Build searchable knowledge base</li>
                    </ul>

                    <h3>Output</h3>
                    <ul>
                        <li>400 comprehensive documentation pages</li>
                        <li>API reference documentation</li>
                        <li>Architecture diagrams and service maps</li>
                        <li>Searchable documentation portal</li>
                        <li>Automated navigation and cross-references</li>
                    </ul>

                    <h3>Domain</h3>
                    <p>Software Development - Documentation</p>
                `
            },
            'knowledge-synthesizer': {
                title: 'Knowledge Synthesizer',
                content: `
                    <h3>Overview</h3>
                    <p>Analyze 75 academic research papers and generate 200 articles, 500 concept cards, and a 10,000-node knowledge graph in 12 minutes.</p>

                    <h3>Orchestration Strategy</h3>
                    <ul>
                        <li>15 parallel agents, each analyzing 5 papers</li>
                        <li>Extract key concepts and relationships</li>
                        <li>Generate comprehensive summary articles</li>
                        <li>Create interconnected concept cards</li>
                        <li>Build visual knowledge graph</li>
                    </ul>

                    <h3>Output</h3>
                    <ul>
                        <li>200 comprehensive articles</li>
                        <li>500 concept definition cards</li>
                        <li>10,000-node knowledge graph</li>
                        <li>Citation tracking and references</li>
                        <li>Interactive visualization interface</li>
                    </ul>

                    <h3>Domain</h3>
                    <p>Content Creation - Research Synthesis</p>
                `
            },
            'automation-orchestrator': {
                title: 'Automation Orchestrator',
                content: `
                    <h3>Overview</h3>
                    <p>Design 50 business processes and generate 950 automation artifacts including scripts, connectors, and validation rules in 10 minutes.</p>

                    <h3>Orchestration Strategy</h3>
                    <ul>
                        <li>50 parallel agents, one per business process</li>
                        <li>Analyze process requirements and workflows</li>
                        <li>Generate automation scripts (RPA, Python, PowerShell)</li>
                        <li>Create integration connectors</li>
                        <li>Build validation and monitoring systems</li>
                    </ul>

                    <h3>Output</h3>
                    <ul>
                        <li>300 workflow automation scripts</li>
                        <li>150 integration connectors</li>
                        <li>500 validation rules and checks</li>
                        <li>Monitoring dashboards and alerts</li>
                        <li>Process documentation and runbooks</li>
                    </ul>

                    <h3>Domain</h3>
                    <p>Business Process Automation</p>
                `
            },
            'universe-architect': {
                title: 'Universe Architect',
                content: `
                    <h3>Overview</h3>
                    <p>Transform a single story premise into a complete fictional universe with 1,100 interconnected elements in 20 minutes.</p>

                    <h3>Orchestration Strategy</h3>
                    <ul>
                        <li>10 parallel agents for different world aspects</li>
                        <li>Generate character profiles with relationships</li>
                        <li>Create detailed location descriptions</li>
                        <li>Design magic systems and world rules</li>
                        <li>Weave interconnected plot threads</li>
                        <li>Ensure consistency across all elements</li>
                    </ul>

                    <h3>Output</h3>
                    <ul>
                        <li>300 world-building elements</li>
                        <li>200 detailed character profiles</li>
                        <li>100 unique location descriptions</li>
                        <li>500 interconnected plot threads</li>
                        <li>Complete mythology and lore documents</li>
                    </ul>

                    <h3>Domain</h3>
                    <p>Creative Writing - World Building</p>
                `
            },
            'system-designer': {
                title: 'System Designer',
                content: `
                    <h3>Overview</h3>
                    <p>Convert requirements into complete system architecture with 1,800 specifications in 14 minutes.</p>

                    <h3>Orchestration Strategy</h3>
                    <ul>
                        <li>100 parallel agents designing system components</li>
                        <li>Generate API specifications (REST, GraphQL)</li>
                        <li>Design database schemas and relationships</li>
                        <li>Create service blueprints and interfaces</li>
                        <li>Build deployment configurations</li>
                        <li>Document cross-service dependencies</li>
                    </ul>

                    <h3>Output</h3>
                    <ul>
                        <li>100 complete API specifications</li>
                        <li>500 database schemas and models</li>
                        <li>200 service blueprints</li>
                        <li>1,000 deployment configurations</li>
                        <li>Architecture diagrams and documentation</li>
                    </ul>

                    <h3>Domain</h3>
                    <p>Software Architecture - System Design</p>
                `
            },
            'data-warehouse-genesis': {
                title: 'Data Warehouse Genesis',
                content: `
                    <h3>Overview</h3>
                    <p>Design and generate 8,500 data engineering artifacts from 100 source systems in 25 minutes.</p>

                    <h3>Orchestration Strategy</h3>
                    <ul>
                        <li>100 parallel agents, one per data source</li>
                        <li>Generate ETL/ELT pipelines (Airflow, dbt)</li>
                        <li>Create data quality frameworks</li>
                        <li>Build monitoring dashboards</li>
                        <li>Design data lineage tracking</li>
                        <li>Implement automated testing</li>
                    </ul>

                    <h3>Output</h3>
                    <ul>
                        <li>2,000 ETL/ELT pipelines</li>
                        <li>5,000 dbt transformation models</li>
                        <li>500 data quality frameworks</li>
                        <li>1,000 monitoring dashboards</li>
                        <li>Complete data lineage documentation</li>
                    </ul>

                    <h3>Domain</h3>
                    <p>Data Engineering - Data Warehouse</p>
                `
            },
            'api-universe': {
                title: 'The Infinite API',
                content: `
                    <h3>Overview</h3>
                    <p>Generate 25,000+ API artifacts including 10,000 endpoints across 200 microservices in 22 minutes.</p>

                    <h3>Orchestration Strategy</h3>
                    <ul>
                        <li>200 parallel agents, one per microservice</li>
                        <li>Generate RESTful and GraphQL endpoints</li>
                        <li>Create comprehensive OpenAPI specs</li>
                        <li>Build unit and integration tests</li>
                        <li>Generate SDK libraries in 8 languages</li>
                        <li>Implement authentication and authorization</li>
                    </ul>

                    <h3>Output</h3>
                    <ul>
                        <li>10,000 production-ready API endpoints</li>
                        <li>10,000 unit tests</li>
                        <li>5,000 integration tests</li>
                        <li>Complete OpenAPI 3.0 specifications</li>
                        <li>SDK libraries in 8 programming languages</li>
                    </ul>

                    <h3>Domain</h3>
                    <p>Software Development - API Design</p>
                `
            },
            'test-cathedral': {
                title: 'Test Cathedral',
                content: `
                    <h3>Overview</h3>
                    <p>Generate 16,000 comprehensive tests covering unit, integration, and E2E testing in 16 minutes.</p>

                    <h3>Orchestration Strategy</h3>
                    <ul>
                        <li>200 parallel agents across test categories</li>
                        <li>Analyze codebase for coverage gaps</li>
                        <li>Generate unit tests with mocks and fixtures</li>
                        <li>Create integration test suites</li>
                        <li>Build end-to-end test scenarios</li>
                        <li>Integrate with CI/CD pipelines</li>
                    </ul>

                    <h3>Output</h3>
                    <ul>
                        <li>10,000+ unit tests</li>
                        <li>5,000 integration tests</li>
                        <li>1,000 end-to-end tests</li>
                        <li>Full coverage reports</li>
                        <li>CI/CD pipeline integration</li>
                        <li>Automated test execution framework</li>
                    </ul>

                    <h3>Domain</h3>
                    <p>Software Quality Assurance - Testing</p>
                `
            },
            'dnd-campaign': {
                title: 'D&D Campaign Architect',
                content: `
                    <h3>Overview</h3>
                    <p>Create a complete 20-session D&D campaign with 500+ elements including NPCs, locations, and dynamic plot threads in 18 minutes.</p>

                    <h3>Orchestration Strategy</h3>
                    <ul>
                        <li>10 parallel agents for campaign elements</li>
                        <li>Generate diverse NPC personalities and backgrounds</li>
                        <li>Create unique locations with encounters</li>
                        <li>Design treasure systems and rewards</li>
                        <li>Build branching narrative paths</li>
                        <li>Ensure player choice consequences</li>
                    </ul>

                    <h3>Output</h3>
                    <ul>
                        <li>20 complete session outlines</li>
                        <li>100+ unique NPCs with full stat blocks</li>
                        <li>50+ detailed locations and maps</li>
                        <li>Encounter design and challenge ratings</li>
                        <li>Dynamic plot threads responding to player choices</li>
                        <li>Treasure tables and magic items</li>
                    </ul>

                    <h3>Domain</h3>
                    <p>Creative Content - Game Design</p>
                `
            },
            'coming-soon-demo': {
                title: 'Cathedral Showcase',
                content: `
                    <h3>Overview</h3>
                    <p>The Cathedral Showcase is a collection of interactive demonstrations visualizing The Matrix's orchestration power in action.</p>

                    <h3>What's Coming</h3>
                    <ul>
                        <li>Interactive visualizations of parallel agent execution</li>
                        <li>Real-time demonstrations of work breakdown structures</li>
                        <li>Live metrics showing orchestration performance</li>
                        <li>Side-by-side comparisons: sequential vs parallel execution</li>
                        <li>Gallery of completed orchestration outcomes</li>
                    </ul>

                    <h3>Features</h3>
                    <ul>
                        <li>Visual representation of N×M outcome generation</li>
                        <li>Agent activity timelines and coordination views</li>
                        <li>Context usage visualization</li>
                        <li>Integration synthesis demonstration</li>
                        <li>Interactive exploration of generated artifacts</li>
                    </ul>

                    <h3>Status</h3>
                    <p>The Cathedral Showcase is currently in development. Check back soon for interactive demonstrations of orchestration in action!</p>
                `
            }
        };

        function openModal(moduleId) {
            const modal = document.getElementById('modal');
            const modalTitle = document.getElementById('modal-title');
            const modalBody = document.getElementById('modal-body');

            if (modalData[moduleId]) {
                modalTitle.textContent = modalData[moduleId].title;
                modalBody.innerHTML = modalData[moduleId].content;
                modal.classList.add('active');
            }
        }

        function closeModal() {
            const modal = document.getElementById('modal');
            modal.classList.remove('active');
        }

        // Close modal on background click
        document.getElementById('modal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeModal();
            }
        });

        // Close modal on ESC key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeModal();
            }
        });

        // Random glitch effect on title
        setInterval(() => {
            if (Math.random() > 0.95) {
                const title = document.querySelector('h1');
                title.style.transform = `translate(${Math.random() * 4 - 2}px, ${Math.random() * 4 - 2}px)`;
                setTimeout(() => {
                    title.style.transform = 'translate(0, 0)';
                }, 50);
            }
        }, 2000);

        // Tab Switching
        function switchTab(tabName) {
            // Hide all tab content
            const tabContents = document.querySelectorAll('.tab-content');
            tabContents.forEach(content => content.classList.remove('active'));

            // Remove active class from all tab buttons
            const tabButtons = document.querySelectorAll('.tab-button');
            tabButtons.forEach(button => button.classList.remove('active'));

            // Show selected tab content
            document.getElementById(tabName + '-tab').classList.add('active');

            // Add active class to clicked button
            event.target.classList.add('active');

            // If library tab, load initial prompt category
            if (tabName === 'library') {
                switchPromptCategory('ultimate');
            }
        }

        // ============================================
        // DYNAMIC DATA LOADING FROM GITHUB
        // ============================================

        // GitHub Raw URL Configuration
        const GITHUB_DATA_SOURCES = {
            ultimate: 'https://raw.githubusercontent.com/kody-w/TheMatrix/main/ULTIMATE_MIND_BLOWERS.json',
            scale: 'https://raw.githubusercontent.com/kody-w/TheMatrix/main/SCALE_FIRST_PROMPTS.json',
            business: 'https://raw.githubusercontent.com/kody-w/TheMatrix/main/BUSINESS_IMPACT_PROMPTS.json',
            ux: 'https://raw.githubusercontent.com/kody-w/TheMatrix/main/prompts-user-experience.json',
            creative: 'https://raw.githubusercontent.com/kody-w/TheMatrix/main/creative-prompts.json'
        };

        // Cache configuration
        const CACHE_DURATION = 1000 * 60 * 15; // 15 minutes
        const CACHE_KEY_PREFIX = 'matrix_prompts_';

        // Global state for prompt library
        let promptLibrary = {
            ultimate: [],
            scale: [],
            business: [],
            ux: [],
            creative: []
        };

        let dataLoadedSuccessfully = false;

        // ============================================
        // SCHEMA TRANSFORMATION ADAPTERS
        // ============================================

        // Extract stats from prompt text (N packages × M items)
        function extractStatsFromText(text) {
            const stats = [];

            // Try to extract N × M pattern
            const multiplyMatch = text.match(/(\d+)\s*(?:packages?|domains?|categories?|sections?|agents?)\s*×\s*(\d+)\s*(?:items?|endpoints?|pages?|components?|features?)/i);
            if (multiplyMatch) {
                const n = parseInt(multiplyMatch[1]);
                const m = parseInt(multiplyMatch[2]);
                stats.push(`${n} Agents`);
                stats.push(`${n * m} Outcomes`);
            }

            // Extract time estimates
            const timeMatch = text.match(/(\d+)\s*(?:minutes?|mins?|hours?)/i);
            if (timeMatch) {
                stats.push(`${timeMatch[1]} Minutes`);
            }

            // Extract large numbers as outcomes if no multiply pattern found
            if (stats.length === 0) {
                const numberMatches = text.match(/\b(\d{1,3}(?:,\d{3})*)\b/g);
                if (numberMatches && numberMatches.length > 0) {
                    const largest = Math.max(...numberMatches.map(n => parseInt(n.replace(/,/g, ''))));
                    if (largest >= 50) {
                        stats.push(`${largest.toLocaleString()} Artifacts`);
                    }
                }
            }

            // Default stats if none found
            if (stats.length === 0) {
                stats.push('Parallel Execution', 'Production Ready');
            }

            return stats;
        }

        // Transform SCALE_FIRST_PROMPTS.json schema
        function transformScalePrompt(item) {
            const stats = extractStatsFromText(item.scale || item.prompt);
            // Truncate long descriptions
            const description = item.prompt.length > 200
                ? item.prompt.substring(0, 197) + '...'
                : item.prompt;

            return {
                title: item.title,
                description: description,
                stats: stats.length > 0 ? stats : ['High Scale', 'Parallel Agents', 'Production Ready'],
                rawData: item // Keep original for modal
            };
        }

        // Transform creative-prompts.json schema
        function transformCreativePrompt(item) {
            const stats = extractStatsFromText(item.creative_output || item.prompt);
            const description = item.prompt.length > 200
                ? item.prompt.substring(0, 197) + '...'
                : item.prompt;

            return {
                title: item.title,
                description: description,
                stats: stats.length > 0 ? stats : ['Creative Generation', 'Interconnected', 'Narrative Depth'],
                rawData: item
            };
        }

        // Transform BUSINESS_IMPACT_PROMPTS.json schema
        function transformBusinessPrompt(item) {
            const stats = extractStatsFromText(item.prompt);

            // Extract ROI from business_impact
            const roiMatch = item.business_impact?.match(/ROI:\s*\$?([\d.]+)M/i);
            if (roiMatch) {
                stats.push(`$${roiMatch[1]}M ROI`);
            }

            const description = item.prompt.length > 200
                ? item.prompt.substring(0, 197) + '...'
                : item.prompt;

            return {
                title: item.title,
                description: description,
                stats: stats.length > 0 ? stats : ['Business Impact', 'Production Ready', 'High ROI'],
                rawData: item
            };
        }

        // Transform prompts-user-experience.json schema
        function transformUXPrompt(item) {
            const stats = extractStatsFromText(item.prompt);
            const description = item.prompt.length > 200
                ? item.prompt.substring(0, 197) + '...'
                : item.prompt;

            return {
                title: item.title,
                description: description,
                stats: stats.length > 0 ? stats : ['User Experience', 'Interactive', 'Responsive'],
                rawData: item
            };
        }

        // Transform ULTIMATE_MIND_BLOWERS.json schema
        function transformUltimatePrompt(item) {
            // Extract stats from strategy consensus and metrics
            const stats = [];

            // Add mind-blow factor
            if (item.mind_blow_factor) {
                stats.push(item.mind_blow_factor.split('-')[0].trim());
            }

            // Add time compression if available
            if (item.time_compression && item.time_compression.includes('→')) {
                const speedMatch = item.time_compression.match(/(\d+)×/);
                if (speedMatch) {
                    stats.push(`${speedMatch[1]}× Faster`);
                }
            }

            // Add business impact if available
            if (item.business_impact) {
                const roiMatch = item.business_impact.match(/\$(\d+\.?\d*[KMB])/);
                if (roiMatch) {
                    stats.push(roiMatch[0]);
                }
            }

            // Add consensus count
            if (item.strategy_consensus) {
                stats.push(`${item.strategy_consensus.length} Strategies`);
            }

            // Truncate description from prompt
            const description = item.prompt.length > 220
                ? item.prompt.substring(0, 217) + '...'
                : item.prompt;

            return {
                title: item.title,
                description: description,
                stats: stats.length > 0 ? stats : ['Ultimate', 'Consensus', 'Mind-Blowing'],
                rawData: item
            };
        }

        // ============================================
        // DATA LOADING FUNCTIONS
        // ============================================

        // Get cached data
        function getCachedData(category) {
            try {
                const cached = localStorage.getItem(CACHE_KEY_PREFIX + category);
                if (!cached) return null;

                const { data, timestamp } = JSON.parse(cached);
                const age = Date.now() - timestamp;

                if (age < CACHE_DURATION) {
                    console.log(`✅ Using cached data for ${category} (${Math.round(age / 1000)}s old)`);
                    return data;
                }
            } catch (e) {
                console.warn('Cache read error:', e);
            }
            return null;
        }

        // Set cached data
        function setCachedData(category, data) {
            try {
                localStorage.setItem(CACHE_KEY_PREFIX + category, JSON.stringify({
                    data: data,
                    timestamp: Date.now()
                }));
            } catch (e) {
                console.warn('Cache write error:', e);
            }
        }

        // Fetch data from GitHub with timeout
        async function fetchWithTimeout(url, timeout = 10000) {
            const controller = new AbortController();
            const timeoutId = setTimeout(() => controller.abort(), timeout);

            try {
                const response = await fetch(url, { signal: controller.signal });
                clearTimeout(timeoutId);

                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }

                return await response.json();
            } catch (error) {
                clearTimeout(timeoutId);
                throw error;
            }
        }

        // Load single category data
        async function loadCategoryData(category) {
            console.log(`📡 Loading ${category} data...`);

            // Check cache first
            const cached = getCachedData(category);
            if (cached) {
                return cached;
            }

            // Fetch from GitHub
            const url = GITHUB_DATA_SOURCES[category];
            if (!url) {
                throw new Error(`No data source configured for category: ${category}`);
            }

            try {
                const rawData = await fetchWithTimeout(url);

                // Transform based on category
                let transformedData;
                switch(category) {
                    case 'ultimate':
                        transformedData = rawData.map(transformUltimatePrompt);
                        break;
                    case 'scale':
                        transformedData = rawData.map(transformScalePrompt);
                        break;
                    case 'creative':
                        transformedData = rawData.map(transformCreativePrompt);
                        break;
                    case 'business':
                        transformedData = rawData.map(transformBusinessPrompt);
                        break;
                    case 'ux':
                        transformedData = rawData.map(transformUXPrompt);
                        break;
                    default:
                        transformedData = rawData;
                }

                // Cache the transformed data
                setCachedData(category, transformedData);

                console.log(`✅ Loaded ${transformedData.length} ${category} prompts`);
                return transformedData;

            } catch (error) {
                console.error(`❌ Failed to load ${category}:`, error);
                throw error;
            }
        }

        // Load all categories in parallel
        async function loadAllPromptData() {
            console.log('🚀 Loading all prompt data from GitHub...');

            const categories = Object.keys(GITHUB_DATA_SOURCES);
            const results = await Promise.allSettled(
                categories.map(category => loadCategoryData(category))
            );

            // Process results
            results.forEach((result, index) => {
                const category = categories[index];
                if (result.status === 'fulfilled') {
                    promptLibrary[category] = result.value;
                } else {
                    console.error(`Failed to load ${category}:`, result.reason);
                    promptLibrary[category] = []; // Empty array on failure
                }
            });

            // Check if at least one category loaded
            const successCount = results.filter(r => r.status === 'fulfilled').length;
            dataLoadedSuccessfully = successCount > 0;

            if (dataLoadedSuccessfully) {
                console.log(`✅ Successfully loaded ${successCount}/${categories.length} categories`);
                updateDataStatus(`✅ Loaded ${successCount}/${categories.length} categories from GitHub`);
            } else {
                console.error('❌ Failed to load any data from GitHub');
                updateDataStatus('❌ Failed to load data');
            }

            return dataLoadedSuccessfully;
        }

        // Update data status indicator
        function updateDataStatus(message) {
            const statusElement = document.getElementById('data-status');
            if (statusElement) {
                statusElement.textContent = message;
            }
        }

        // Refresh data (clear cache and reload)
        async function refreshPromptData() {
            console.log('🔄 Refreshing all data...');

            // Clear cache
            Object.keys(GITHUB_DATA_SOURCES).forEach(category => {
                localStorage.removeItem(CACHE_KEY_PREFIX + category);
            });

            // Show loading state
            showLoadingState();

            // Reload data
            const success = await loadAllPromptData();

            if (success) {
                // Rebuild search index
                buildSearchIndex();

                // Refresh current category display
                const activeCategory = document.querySelector('.prompt-tab-button.active')?.dataset?.category || 'scale';
                switchPromptCategory(activeCategory);

                hideLoadingState();
                showNotification('✅ Data refreshed successfully!');
            } else {
                hideLoadingState();
                showErrorState();
            }
        }

        // ============================================
        // LOADING & ERROR UI STATES
        // ============================================

        function showLoadingState() {
            const content = document.getElementById('prompt-library-content');
            if (content) {
                content.innerHTML = `
                    <div style="text-align: center; padding: 4rem 2rem; animation: pulse 2s infinite;">
                        <div style="font-size: 3rem; margin-bottom: 1rem;">⚡</div>
                        <div style="font-size: 1.5rem; font-weight: bold; margin-bottom: 0.5rem;">
                            LOADING DATA FROM GITHUB...
                        </div>
                        <div style="opacity: 0.7;">
                            Fetching latest prompt library from repository
                        </div>
                        <div style="margin-top: 2rem; opacity: 0.5; font-size: 0.9rem;">
                            Matrix digital rain flows through The Matrix...
                        </div>
                    </div>
                    <style>
                        @keyframes pulse {
                            0%, 100% { opacity: 1; }
                            50% { opacity: 0.5; }
                        }
                    </style>
                `;
            }
        }

        function hideLoadingState() {
            // Loading state will be replaced by actual content
        }

        function showErrorState() {
            const content = document.getElementById('prompt-library-content');
            if (content) {
                content.innerHTML = `
                    <div style="text-align: center; padding: 4rem 2rem;">
                        <div style="font-size: 3rem; margin-bottom: 1rem;">⚠️</div>
                        <div style="font-size: 1.5rem; font-weight: bold; margin-bottom: 0.5rem; color: var(--matrix-green);">
                            FAILED TO LOAD DATA
                        </div>
                        <div style="opacity: 0.7; margin-bottom: 2rem;">
                            Could not fetch prompt library from GitHub.<br>
                            Check your internet connection or try again later.
                        </div>
                        <button onclick="refreshPromptData()"
                                style="background: var(--matrix-green); color: var(--deep-black); border: none;
                                       padding: 1rem 2rem; font-family: 'Courier New', Consolas, monospace;
                                       font-size: 1rem; cursor: pointer; border-radius: 5px; font-weight: bold;">
                            🔄 RETRY
                        </button>
                    </div>
                `;
            }
        }

        // Switch Prompt Category
        function switchPromptCategory(category) {
            // Remove active class from all prompt tab buttons
            const promptTabButtons = document.querySelectorAll('.prompt-tab-button');
            promptTabButtons.forEach(button => button.classList.remove('active'));

            // Add active class to the button for this category
            const targetButton = document.querySelector(`.prompt-tab-button[data-category="${category}"]`);
            if (targetButton) {
                targetButton.classList.add('active');
            }

            // Load prompts for selected category
            const promptContent = document.getElementById('prompt-library-content');

            // Check if data is loaded
            if (!dataLoadedSuccessfully) {
                showErrorState();
                return;
            }

            const prompts = promptLibrary[category] || [];

            if (prompts.length === 0) {
                promptContent.innerHTML = `
                    <div style="text-align: center; padding: 4rem 2rem; opacity: 0.7;">
                        <div style="font-size: 2rem; margin-bottom: 1rem;">📂</div>
                        <div style="font-size: 1.2rem;">No prompts available for this category</div>
                        <div style="margin-top: 1rem; font-size: 0.9rem;">
                            Data may still be loading or failed to fetch.
                        </div>
                    </div>
                `;
                return;
            }

            promptContent.innerHTML = '';

            prompts.forEach(prompt => {
                const card = document.createElement('div');
                card.className = 'capability-card';
                card.onclick = () => openPromptModal(prompt);

                card.innerHTML = `
                    <div class="capability-header">
                        <div class="capability-title">${prompt.title}</div>
                        <div class="capability-status ready">READY</div>
                    </div>
                    <div class="capability-description">
                        ${prompt.description}
                    </div>
                    <div class="capability-stats">
                        ${prompt.stats.map(stat => `<span>${stat}</span>`).join('')}
                    </div>
                `;

                promptContent.appendChild(card);
            });
        }

        // Open Prompt Modal
        function openPromptModal(prompt) {
            const modal = document.getElementById('modal');
            const modalTitle = document.getElementById('modal-title');
            const modalBody = document.getElementById('modal-body');

            modalTitle.textContent = prompt.title;

            // Get additional data from rawData if available
            const rawData = prompt.rawData || {};
            const fullPrompt = rawData.prompt || prompt.description;
            const additionalInfo = rawData.scale || rawData.creative_output || rawData.ux_delivered || rawData.business_impact || '';
            const wowFactor = rawData.wow_factor || '';

            let modalContent = `
                <h3>Full Prompt</h3>
                <div style="background: rgba(0,0,0,0.3); padding: 1rem; border-radius: 5px; margin-bottom: 1.5rem; position: relative;">
                    <p style="white-space: pre-wrap;">${fullPrompt}</p>
                    <button onclick="copyToClipboard('${fullPrompt.replace(/'/g, "\\'")}', '✅ Prompt copied!')"
                            style="position: absolute; top: 0.5rem; right: 0.5rem; background: var(--matrix-green); color: var(--deep-black); border: none; padding: 0.5rem 1rem; border-radius: 3px; cursor: pointer; font-family: 'Courier New', Consolas, monospace; font-size: 0.8rem;">
                        📋 COPY
                    </button>
                </div>

                <h3>Orchestration Stats</h3>
                <ul style="margin-bottom: 1.5rem;">
                    ${prompt.stats.map(stat => `<li>${stat}</li>`).join('')}
                </ul>`;

            if (additionalInfo) {
                modalContent += `
                <h3>Details</h3>
                <div style="background: rgba(0,0,0,0.3); padding: 1rem; border-radius: 5px; margin-bottom: 1.5rem;">
                    <p style="white-space: pre-wrap;">${additionalInfo}</p>
                </div>`;
            }

            if (wowFactor) {
                modalContent += `
                <h3>🎯 Impact</h3>
                <div style="background: rgba(0, 255, 65, 0.1); padding: 1rem; border-radius: 5px; margin-bottom: 1.5rem; border-left: 3px solid var(--matrix-green);">
                    <p style="white-space: pre-wrap;">${wowFactor}</p>
                </div>`;
            }

            modalContent += `
                <h3>How to Use</h3>
                <p>Copy this prompt concept and adapt it to your specific project needs. The Matrix orchestrator will analyze your codebase, generate a work breakdown structure, and spawn parallel agents to generate all required artifacts.</p>
            `;

            modalBody.innerHTML = modalContent;
            modal.classList.add('active');
        }

        // Open Documentation Modal (placeholder - would load actual markdown in production)
        function openDocModal(filename) {
            const modal = document.getElementById('modal');
            const modalTitle = document.getElementById('modal-title');
            const modalBody = document.getElementById('modal-body');

            modalTitle.textContent = filename;
            modalBody.innerHTML = `
                <h3>Documentation File</h3>
                <p>This would display the contents of <strong>${filename}</strong> in a production environment.</p>
                <p>To view this file:</p>
                <ul>
                    <li>Open the file directly from your IDE</li>
                    <li>View it on GitHub in your repository</li>
                    <li>Use a markdown viewer in your terminal</li>
                </ul>
                <p style="margin-top: 1rem; opacity: 0.7;">
                    <em>Note: In a deployed version, this modal would fetch and render the markdown content dynamically.</em>
                </p>
            `;

            modal.classList.add('active');
        }

        // Global Search Function
        let searchIndex = [];

        function buildSearchIndex() {
            searchIndex = [];

            // Add modal data
            for (const [key, data] of Object.entries(modalData)) {
                searchIndex.push({
                    id: key,
                    title: data.title,
                    content: data.content,
                    category: 'Mind-Blowing Prompt',
                    action: () => openModal(key)
                });
            }

            // Add prompt library
            for (const [category, prompts] of Object.entries(promptLibrary)) {
                prompts.forEach(prompt => {
                    searchIndex.push({
                        title: prompt.title,
                        content: prompt.description,
                        category: `Prompt Library - ${category}`,
                        action: () => openPromptModal(prompt)
                    });
                });
            }

            // Add docs
            const docs = [
                { title: 'README.md', category: 'Documentation' },
                { title: 'CLAUDE.md', category: 'Documentation' },
                { title: 'CATHEDRAL_EXECUTIVE_SUMMARY.md', category: 'Documentation' }
            ];

            docs.forEach(doc => {
                searchIndex.push({
                    title: doc.title,
                    content: '',
                    category: doc.category,
                    action: () => openDocModal(doc.title)
                });
            });
        }

        function globalSearch(query) {
            const resultsContainer = document.getElementById('search-results');

            if (!query || query.length < 2) {
                resultsContainer.classList.remove('active');
                return;
            }

            const lowerQuery = query.toLowerCase();
            const results = searchIndex.filter(item =>
                item.title.toLowerCase().includes(lowerQuery) ||
                item.content.toLowerCase().includes(lowerQuery) ||
                item.category.toLowerCase().includes(lowerQuery)
            ).slice(0, 10);

            if (results.length === 0) {
                resultsContainer.innerHTML = '<div class="search-result-item"><div class="search-result-title">No results found</div></div>';
                resultsContainer.classList.add('active');
                return;
            }

            resultsContainer.innerHTML = results.map(result => `
                <div class="search-result-item" onclick='${result.action ? 'searchResultClick(' + JSON.stringify(result) + ')' : ''}'>
                    <div class="search-result-title">${highlightQuery(result.title, query)}</div>
                    <div class="search-result-category">${result.category}</div>
                </div>
            `).join('');

            resultsContainer.classList.add('active');
        }

        function highlightQuery(text, query) {
            const regex = new RegExp(`(${query})`, 'gi');
            return text.replace(regex, '<span style="background: var(--glow-green); color: var(--deep-black); padding: 0 0.2rem;">$1</span>');
        }

        function searchResultClick(result) {
            result.action();
            document.getElementById('search-results').classList.remove('active');
            document.getElementById('global-search').value = '';
        }

        // Close search results when clicking outside
        document.addEventListener('click', (e) => {
            const searchContainer = document.querySelector('.search-container');
            if (searchContainer && !searchContainer.contains(e.target)) {
                document.getElementById('search-results').classList.remove('active');
            }
        });

        // Prompt Generator
        let generatedPromptText = '';

        function generatePrompt() {
            const domain = document.getElementById('builder-domain').value;
            const agents = parseInt(document.getElementById('builder-agents').value);
            const outcomes = parseInt(document.getElementById('builder-outcomes').value);
            const description = document.getElementById('builder-description').value;
            const output = document.getElementById('builder-output').value;
            const requirements = document.getElementById('builder-requirements').value;

            const totalArtifacts = agents * outcomes;
            const estimatedTime = Math.ceil(8 + (totalArtifacts / 100));
            const speedupFactor = Math.floor(totalArtifacts / estimatedTime * 60);

            const prompt = `# Custom Orchestration Prompt: ${domain.charAt(0).toUpperCase() + domain.slice(1)}

## Project Overview
${description || 'Custom parallel orchestration project'}

## Orchestration Strategy
- **Domain**: ${domain.charAt(0).toUpperCase() + domain.slice(1)}
- **Agents**: ${agents} parallel agents
- **Outcomes per Agent**: ${outcomes}
- **Total Artifacts**: ${totalArtifacts}
- **Output Type**: ${output || 'Specified artifacts'}

## Work Breakdown Structure
Generate ${agents} work packages, with ${outcomes} ${output || 'items'} per package.

## Technical Requirements
${requirements || 'Follow project conventions and best practices'}

## Expected Output
${totalArtifacts} production-ready ${output || 'artifacts'} that follow consistent patterns and integrate seamlessly.

## Orchestrator Instructions
1. **Discovery**: Analyze relevant project files and documentation
2. **Strategy**: Generate ${agents} work packages from domain analysis
3. **System Analysis**: Extract patterns, standards, and technical requirements
4. **Agent Spawn**: Launch ${agents} outcome-generator agents in parallel
5. **Integration**: Invoke integrator agent to synthesize all ${totalArtifacts} outcomes
6. **Validation**: Verify all artifacts generated successfully

## Success Criteria
- ✅ ${totalArtifacts} artifacts generated
- ✅ Consistent patterns across all outcomes
- ✅ Integration complete
- ✅ All dependencies resolved
- ✅ Documentation included

---
Generated with The Matrix AI Orchestration System
Estimated completion time: ~${estimatedTime} minutes
Speedup vs sequential: ${speedupFactor}x faster`;

            generatedPromptText = prompt;
            document.getElementById('generated-prompt').textContent = prompt;
            document.getElementById('builder-actions').style.display = 'flex';
            document.getElementById('estimated-metrics').style.display = 'block';

            // Update metrics
            document.getElementById('total-artifacts').textContent = totalArtifacts;
            document.getElementById('estimated-time').textContent = estimatedTime;
            document.getElementById('speedup-factor').textContent = speedupFactor + 'x';

            // Animate metrics
            animateValue('total-artifacts', 0, totalArtifacts, 1000);
            animateValue('estimated-time', 0, estimatedTime, 1000);
        }

        function animateValue(id, start, end, duration) {
            const element = document.getElementById(id);
            const range = end - start;
            const increment = range / (duration / 16);
            let current = start;

            const timer = setInterval(() => {
                current += increment;
                if ((increment > 0 && current >= end) || (increment < 0 && current <= end)) {
                    current = end;
                    clearInterval(timer);
                }
                element.textContent = id === 'speedup-factor' ? Math.floor(current) + 'x' : Math.floor(current);
            }, 16);
        }

        function copyPrompt() {
            navigator.clipboard.writeText(generatedPromptText).then(() => {
                showNotification('📋 Prompt copied to clipboard!');
            });
        }

        function downloadPrompt() {
            const blob = new Blob([generatedPromptText], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'matrix-orchestration-prompt.txt';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            showNotification('💾 Prompt downloaded!');
        }

        function sharePrompt() {
            const shareData = {
                title: 'Matrix Orchestration Prompt',
                text: generatedPromptText
            };

            if (navigator.share) {
                navigator.share(shareData).catch(() => {
                    copyPrompt();
                });
            } else {
                copyPrompt();
                showNotification('🔗 Prompt copied (sharing not supported)');
            }
        }

        function showNotification(message) {
            const notification = document.createElement('div');
            notification.textContent = message;
            notification.style.cssText = `
                position: fixed;
                top: 2rem;
                right: 2rem;
                background: var(--matrix-green);
                color: var(--deep-black);
                padding: 1rem 2rem;
                border-radius: 5px;
                font-family: 'Courier New', Consolas, monospace;
                font-weight: bold;
                z-index: 10000;
                animation: slideInRight 0.3s ease;
                box-shadow: 0 0 30px var(--glow-green);
            `;

            document.body.appendChild(notification);

            setTimeout(() => {
                notification.style.animation = 'slideOutRight 0.3s ease';
                setTimeout(() => document.body.removeChild(notification), 300);
            }, 3000);
        }

        // Add slideIn/Out animations to style
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideInRight {
                from { transform: translateX(400px); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            @keyframes slideOutRight {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(400px); opacity: 0; }
            }
        `;
        document.head.appendChild(style);

        // Enhanced Modal with Copy Button
        function openPromptModalEnhanced(prompt) {
            const modal = document.getElementById('modal');
            const modalTitle = document.getElementById('modal-title');
            const modalBody = document.getElementById('modal-body');

            modalTitle.textContent = prompt.title;
            modalBody.innerHTML = `
                <h3>Description</h3>
                <p>${prompt.description}</p>

                <h3>Orchestration Stats</h3>
                <ul>
                    ${prompt.stats.map(stat => `<li>${stat}</li>`).join('')}
                </ul>

                <h3>Example Prompt</h3>
                <div style="background: rgba(0,0,0,0.5); padding: 1rem; border-radius: 5px; position: relative;">
                    <p style="font-style: italic;">"${prompt.description}"</p>
                    <button onclick="copyToClipboard('${prompt.description.replace(/'/g, "\\'")}', '✅ Copied!')"
                            style="position: absolute; top: 0.5rem; right: 0.5rem; background: var(--matrix-green); color: var(--deep-black); border: none; padding: 0.5rem 1rem; border-radius: 3px; cursor: pointer; font-family: 'Courier New', Consolas, monospace;">
                        📋 COPY
                    </button>
                </div>

                <h3>How to Use</h3>
                <p>Copy this prompt concept and adapt it to your specific project needs. The Matrix orchestrator will analyze your codebase, generate a work breakdown structure, and spawn parallel agents to generate all required artifacts.</p>
            `;

            modal.classList.add('active');
        }

        function copyToClipboard(text, successMsg) {
            navigator.clipboard.writeText(text).then(() => {
                showNotification(successMsg || '📋 Copied to clipboard!');
            });
        }

        // Load and render interactive demos from config
        async function loadDemos() {
            try {
                const response = await fetch('data/config/demos_config.json');
                const config = await response.json();
                renderDemos(config.demos);
                console.log('✅ Demos loaded successfully');
            } catch (error) {
                console.error('❌ Error loading demos:', error);
                // Show error message in demos grid
                const demosGrid = document.getElementById('demos-grid');
                if (demosGrid) {
                    demosGrid.innerHTML = '<p style="text-align: center; opacity: 0.6;">Error loading demonstrations. Please refresh the page.</p>';
                }
            }
        }

        function renderDemos(demos) {
            const demosGrid = document.getElementById('demos-grid');
            if (!demosGrid) return;

            demosGrid.innerHTML = demos.map(demo => {
                const statusClass = demo.status === 'ready' ? 'ready' : 'coming-soon';
                const onClick = demo.status === 'ready'
                    ? `window.open('${demo.path}', '_blank')`
                    : `openModal('coming-soon-demo')`;

                return `
                    <div class="capability-card" onclick="${onClick}">
                        <div class="capability-header">
                            <div class="capability-title">${demo.title}</div>
                            <div class="capability-status ${statusClass}">${demo.statusLabel}</div>
                        </div>
                        <div class="capability-description">
                            ${demo.description}
                        </div>
                        <div class="capability-stats">
                            ${demo.tags.map(tag => `<span>${tag}</span>`).join('\n                            ')}
                        </div>
                    </div>
                `;
            }).join('');
        }

        // Initialize: Load data from GitHub and build UI
        document.addEventListener('DOMContentLoaded', async () => {
            console.log('🎬 Matrix initializing...');

            // Show loading state
            showLoadingState();

            // Load demos config
            await loadDemos();

            // Load all prompt data from GitHub
            const success = await loadAllPromptData();

            if (success) {
                // Build search index with loaded data
                buildSearchIndex();

                // Load default category (scale)
                switchPromptCategory('scale');

                console.log('✅ Matrix initialization complete');
            } else {
                // Show error state if loading failed
                showErrorState();
                console.error('❌ Matrix initialization failed');
            }

            // Animate analytics charts on tab switch
            const analyticsTab = document.querySelector('.tab-button:nth-child(6)');
            if (analyticsTab) {
                analyticsTab.addEventListener('click', () => {
                    setTimeout(() => {
                        animateCharts();
                    }, 300);
                });
            }
        });

        function animateCharts() {
            // Animate comparison bars
            const parallelBar = document.querySelector('.comparison-bar.parallel .bar-fill');
            if (parallelBar) {
                parallelBar.style.width = '0%';
                setTimeout(() => {
                    parallelBar.style.width = '1%';
                }, 100);
            }
        }

        // ========== ULTRA FEATURES: STATS, FAVORITES, KEYBOARD SHORTCUTS ==========

        // LocalStorage Management
        const STORAGE_KEYS = {
            stats: 'matrix_stats',
            favorites: 'matrix_favorites',
            viewed: 'matrix_viewed_prompts'
        };

        function getStats() {
            const stored = localStorage.getItem(STORAGE_KEYS.stats);
            return stored ? JSON.parse(stored) : {
                viewed: 0,
                copied: 0,
                favorites: 0,
                built: 0
            };
        }

        function saveStats(stats) {
            localStorage.setItem(STORAGE_KEYS.stats, JSON.stringify(stats));
            updateStatsDisplay();
        }

        function incrementStat(stat) {
            const stats = getStats();
            stats[stat]++;
            saveStats(stats);
        }

        function updateStatsDisplay() {
            const stats = getStats();
            document.getElementById('stat-viewed').textContent = stats.viewed;
            document.getElementById('stat-copied').textContent = stats.copied;
            document.getElementById('stat-favorites').textContent = stats.favorites;
            document.getElementById('stat-built').textContent = stats.built;

            // Update progress (total unique prompts viewed out of 40)
            const viewedPrompts = getViewedPrompts();
            const progress = Math.min((viewedPrompts.size / 40) * 100, 100);
            document.getElementById('exploration-progress').style.width = progress + '%';
            document.getElementById('progress-text').textContent = Math.floor(progress) + '% Explored';
        }

        function getViewedPrompts() {
            const stored = localStorage.getItem(STORAGE_KEYS.viewed);
            return stored ? new Set(JSON.parse(stored)) : new Set();
        }

        function addViewedPrompt(promptId) {
            const viewed = getViewedPrompts();
            if (!viewed.has(promptId)) {
                viewed.add(promptId);
                localStorage.setItem(STORAGE_KEYS.viewed, JSON.stringify([...viewed]));
                incrementStat('viewed');
            }
        }

        // Favorites System
        function getFavorites() {
            const stored = localStorage.getItem(STORAGE_KEYS.favorites);
            return stored ? new Set(JSON.parse(stored)) : new Set();
        }

        function toggleFavorite(promptId) {
            const favorites = getFavorites();
            if (favorites.has(promptId)) {
                favorites.delete(promptId);
            } else {
                favorites.add(promptId);
            }
            localStorage.setItem(STORAGE_KEYS.favorites, JSON.stringify([...favorites]));

            const stats = getStats();
            stats.favorites = favorites.size;
            saveStats(stats);
            updateFavoriteButtons();

            showNotification(favorites.has(promptId) ? '⭐ Added to favorites!' : '✨ Removed from favorites');
        }

        function updateFavoriteButtons() {
            const favorites = getFavorites();
            document.getElementById('fav-count').textContent = favorites.size;

            // Update all favorite buttons on cards
            document.querySelectorAll('.favorite-btn').forEach(btn => {
                const promptId = btn.dataset.promptId;
                if (favorites.has(promptId)) {
                    btn.classList.add('favorited');
                    btn.textContent = '⭐';
                } else {
                    btn.classList.remove('favorited');
                    btn.textContent = '☆';
                }
            });
        }

        function showFavorites() {
            const favorites = getFavorites();
            if (favorites.size === 0) {
                showNotification('No favorites yet! Click the star on any prompt card.');
                return;
            }

            const modal = document.getElementById('modal');
            const modalTitle = document.getElementById('modal-title');
            const modalBody = document.getElementById('modal-body');

            modalTitle.textContent = `⭐ Your Favorites (${favorites.size})`;
            modalBody.innerHTML = `
                <h3>Saved Prompts</h3>
                <p>You have ${favorites.size} favorite prompt${favorites.size !== 1 ? 's' : ''}:</p>
                <ul style="margin-top: 1rem;">
                    ${[...favorites].map(id => `<li style="cursor: pointer; padding: 0.5rem; border-bottom: 1px solid var(--glass-border);" onclick="openModal('${id}'); closeModal();">${id.replace(/-/g, ' ').toUpperCase()}</li>`).join('')}
                </ul>
                <p style="margin-top: 1rem; opacity: 0.7;">Click any prompt to view details.</p>
            `;

            modal.classList.add('active');
            toggleFabMenu(); // Close FAB menu
        }

        // Quick Copy Function
        function quickCopyPrompt(promptId) {
            const promptTexts = {
                'great-migration': 'Transform 2,500 legacy PHP files into modern React/TypeScript components with 100% test coverage. Generate 250 parallel agents, each handling 10 files independently with full migration to microservices architecture.',
                'documentation-engine': 'Analyze 3,500 codebase files across 50 microservices and generate comprehensive technical documentation: API references, tutorials, architecture guides, and troubleshooting docs with automated cross-references.',
                'knowledge-synthesizer': 'Read 75 academic research papers and generate 200 interconnected educational articles for different expertise levels, plus 500 concept cards and a 10,000-node knowledge graph.',
                'automation-orchestrator': 'Design 50 business processes and generate 300 workflow automation scripts, 150 integration connectors, 500 validation rules with monitoring dashboards.',
                'universe-architect': 'Take a single story premise and generate a complete fictional universe: 300 world elements, 200 character profiles, 100 locations, 500 plot threads—all interconnected.',
                'system-designer': 'Convert requirements into complete system architecture: 100 API specifications, 500 database schemas, 200 service blueprints, 1,000 deployment configurations.',
                'data-warehouse-genesis': 'Design and generate 2,000 ETL pipelines, 5,000 dbt models, 500 data quality frameworks, and 1,000 monitoring dashboards from 100 source systems.',
                'api-universe': 'Generate 10,000 RESTful endpoints across 200 microservices with complete OpenAPI specs, 10,000 unit tests, 5,000 integration tests, and SDK libraries in 8 languages.',
                'test-cathedral': 'Generate 16,000 comprehensive tests: 10,000 unit tests, 5,000 integration tests, 1,000 end-to-end tests with full coverage reports and CI/CD integration.',
                'dnd-campaign': 'Create a complete 20-session D&D campaign with 100+ NPCs with full stat blocks, 50+ detailed locations, encounter design, treasure systems, and dynamic plot threads responding to player choices.'
            };

            const text = promptTexts[promptId] || 'Orchestration prompt for ' + promptId;
            copyToClipboard(text, '✅ Prompt copied!');
            incrementStat('copied');
        }

        // FAB Menu Toggle
        function toggleFabMenu() {
            const menu = document.getElementById('fab-menu');
            const fab = document.getElementById('fab');
            if (menu.style.display === 'none') {
                menu.style.display = 'block';
                menu.style.animation = 'slideInUp 0.3s';
                fab.style.transform = 'rotate(135deg)';
            } else {
                menu.style.display = 'none';
                fab.style.transform = 'rotate(0deg)';
            }
        }

        // Keyboard Shortcuts Toggle
        function toggleShortcuts() {
            const panel = document.getElementById('shortcuts-panel');
            panel.classList.toggle('active');
        }

        // ========== WAVE 4: THEME SWITCHER ==========

        // Toggle Theme Selector Panel
        function toggleThemeSelector() {
            const panel = document.getElementById('theme-selector');
            panel.classList.toggle('active');
            toggleFabMenu(); // Close FAB menu when opening theme selector
            updateThemeSelection();
        }

        // Set Theme
        function setTheme(themeName) {
            // Apply theme to body
            document.body.setAttribute('data-theme', themeName);

            // Save to localStorage
            localStorage.setItem('matrix_theme', themeName);

            // Update active state in UI
            updateThemeSelection();

            // Show notification
            const themeNames = {
                'matrix-green': 'MATRIX GREEN',
                'cyber-blue': 'CYBER BLUE',
                'alert-red': 'ALERT RED',
                'premium-gold': 'PREMIUM GOLD',
                'stealth-dark': 'STEALTH DARK'
            };
            showNotification(`🎨 Theme changed to ${themeNames[themeName]}!`);

            // Close theme selector after selection
            setTimeout(() => {
                toggleThemeSelector();
            }, 500);
        }

        // Update theme selection UI
        function updateThemeSelection() {
            const currentTheme = document.body.getAttribute('data-theme') || 'matrix-green';
            const themeOptions = document.querySelectorAll('.theme-option');

            themeOptions.forEach(option => {
                const themeName = option.getAttribute('data-theme');
                if (themeName === currentTheme) {
                    option.classList.add('active');
                } else {
                    option.classList.remove('active');
                }
            });
        }

        // Load saved theme on page load
        function loadTheme() {
            const savedTheme = localStorage.getItem('matrix_theme');
            if (savedTheme) {
                document.body.setAttribute('data-theme', savedTheme);
            } else {
                // Default to matrix-green
                document.body.setAttribute('data-theme', 'matrix-green');
            }
        }

        // Load theme when page loads
        loadTheme();

        // ========== WAVE 4: DAILY CHALLENGE SYSTEM ==========

        // All available prompts for challenges (from PROMPT_DATA)
        const CHALLENGE_PROMPTS = [
            'great-migration', 'documentation-engine', 'knowledge-synthesizer',
            'automation-orchestrator', 'universe-architect', 'system-designer',
            'data-warehouse-genesis', 'api-universe', 'test-cathedral', 'dnd-campaign'
        ];

        // Get daily challenge data from localStorage
        function getDailyChallengeData() {
            const data = localStorage.getItem('matrix_daily_challenge');
            if (data) {
                return JSON.parse(data);
            }
            return {
                currentStreak: 0,
                bestStreak: 0,
                totalCompleted: 0,
                lastCompletedDate: null,
                completedDates: []
            };
        }

        // Save daily challenge data
        function saveDailyChallengeData(data) {
            localStorage.setItem('matrix_daily_challenge', JSON.stringify(data));
        }

        // Get today's date string (YYYY-MM-DD)
        function getTodayString() {
            const today = new Date();
            return today.toISOString().split('T')[0];
        }

        // Get yesterday's date string
        function getYesterdayString() {
            const yesterday = new Date();
            yesterday.setDate(yesterday.getDate() - 1);
            return yesterday.toISOString().split('T')[0];
        }

        // Generate deterministic prompt for today
        function getTodaysPrompt() {
            const todayString = getTodayString();
            // Use date as seed for consistent daily prompt
            let hash = 0;
            for (let i = 0; i < todayString.length; i++) {
                hash = ((hash << 5) - hash) + todayString.charCodeAt(i);
                hash = hash & hash; // Convert to 32bit integer
            }
            const index = Math.abs(hash) % CHALLENGE_PROMPTS.length;
            return CHALLENGE_PROMPTS[index];
        }

        // Check if today's challenge is completed
        function isTodaysChallengeCompleted() {
            const data = getDailyChallengeData();
            const today = getTodayString();
            return data.completedDates.includes(today);
        }

        // Show daily challenge modal
        function showDailyChallenge() {
            const modal = document.getElementById('daily-challenge-modal');
            modal.classList.add('active');
            toggleFabMenu(); // Close FAB menu

            // Load challenge data
            const data = getDailyChallengeData();
            const todayPromptId = getTodaysPrompt();
            const promptData = PROMPT_DATA[todayPromptId];
            const today = new Date();
            const dateString = today.toLocaleDateString('en-US', {
                weekday: 'long',
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });

            // Update UI
            document.getElementById('challenge-date').textContent = dateString;
            document.getElementById('current-streak').textContent = data.currentStreak;
            document.getElementById('best-streak').textContent = data.bestStreak;
            document.getElementById('total-completed').textContent = data.totalCompleted;

            document.getElementById('challenge-prompt-title').textContent = promptData.title;
            document.getElementById('challenge-prompt-desc').textContent = promptData.description;
            document.getElementById('challenge-agents').textContent = promptData.agents;
            document.getElementById('challenge-artifacts').textContent = promptData.artifacts;
            document.getElementById('challenge-domain').textContent = promptData.domain;

            // Check if already completed
            const completed = isTodaysChallengeCompleted();
            const completeBtn = document.getElementById('complete-challenge-btn');
            const statusDiv = document.getElementById('challenge-status');

            if (completed) {
                completeBtn.disabled = true;
                completeBtn.textContent = '✅ Completed Today!';
                statusDiv.style.display = 'block';
                document.getElementById('new-streak').textContent = data.currentStreak;
            } else {
                completeBtn.disabled = false;
                completeBtn.textContent = '✅ Mark Complete';
                statusDiv.style.display = 'none';

                // Show flame indicator if not completed
                updateChallengeIndicator();
            }
        }

        // Close daily challenge modal
        function closeDailyChallenge() {
            const modal = document.getElementById('daily-challenge-modal');
            modal.classList.remove('active');
        }

        // View challenge prompt details
        function viewChallengePrompt() {
            const todayPromptId = getTodaysPrompt();
            closeDailyChallenge();
            setTimeout(() => {
                openModal(todayPromptId);
            }, 300);
        }

        // Complete daily challenge
        function completeDailyChallenge() {
            const data = getDailyChallengeData();
            const today = getTodayString();
            const yesterday = getYesterdayString();

            // Add today to completed dates
            if (!data.completedDates.includes(today)) {
                data.completedDates.push(today);
                data.totalCompleted++;

                // Update streak
                if (data.lastCompletedDate === yesterday) {
                    // Continuing streak
                    data.currentStreak++;
                } else if (data.lastCompletedDate === today) {
                    // Already completed today (shouldn't happen)
                    return;
                } else {
                    // New streak
                    data.currentStreak = 1;
                }

                // Update best streak
                if (data.currentStreak > data.bestStreak) {
                    data.bestStreak = data.currentStreak;
                }

                data.lastCompletedDate = today;

                // Save data
                saveDailyChallengeData(data);

                // Update UI
                document.getElementById('current-streak').textContent = data.currentStreak;
                document.getElementById('best-streak').textContent = data.bestStreak;
                document.getElementById('total-completed').textContent = data.totalCompleted;
                document.getElementById('new-streak').textContent = data.currentStreak;

                // Show completion status
                const completeBtn = document.getElementById('complete-challenge-btn');
                completeBtn.disabled = true;
                completeBtn.textContent = '✅ Completed Today!';

                const statusDiv = document.getElementById('challenge-status');
                statusDiv.style.display = 'block';

                // Show notification
                showNotification(`🎯 Daily Challenge Complete! Streak: ${data.currentStreak} 🔥`);

                // Update challenge indicator
                updateChallengeIndicator();

                // Check for streak achievements
                if (data.currentStreak === 7) {
                    setTimeout(() => {
                        showNotification('🏆 Achievement: Week Warrior! 7-day streak!');
                    }, 1500);
                } else if (data.currentStreak === 30) {
                    setTimeout(() => {
                        showNotification('🏆 Achievement: Monthly Master! 30-day streak!');
                    }, 1500);
                }
            }
        }

        // Update challenge indicator (flame icon)
        function updateChallengeIndicator() {
            const indicator = document.getElementById('challenge-indicator');
            const completed = isTodaysChallengeCompleted();

            if (completed) {
                indicator.style.display = 'none';
            } else {
                indicator.style.display = 'inline';
            }
        }

        // Initialize challenge indicator on page load
        updateChallengeIndicator();

        // ========== LOCAL APPS SYSTEM ==========

        // Global state for apps
        let allApps = [];
        let filteredApps = [];
        let activeCategories = new Set();
        let launchMode = 'modal'; // 'modal' or 'window'

        // Load apps configuration from JSON
        async function loadApps() {
            try {
                const response = await fetch('localFirstTools/data/config/utility_apps_config.json');
                const data = await response.json();
                allApps = data.apps || [];
                filteredApps = [...allApps];

                renderCategoryFilters();
                renderApps();
                updateAppStats();

                // Hide loading indicator
                document.getElementById('apps-loading').style.display = 'none';
            } catch (error) {
                console.error('Error loading apps:', error);
                document.getElementById('apps-loading').innerHTML = `
                    <div style="font-size: 2rem; margin-bottom: 1rem;">⚠️</div>
                    <div>Error loading apps. Please ensure utility_apps_config.json exists.</div>
                `;
            }
        }

        // Render category filter pills
        function renderCategoryFilters() {
            const categoriesSet = new Set();
            allApps.forEach(app => {
                app.tags?.forEach(tag => categoriesSet.add(tag));
            });

            const categories = Array.from(categoriesSet).sort();
            const filterContainer = document.getElementById('category-filters');

            // Add "All" filter
            const allPill = document.createElement('button');
            allPill.className = 'filter-pill active';
            allPill.textContent = `🌐 ALL (${allApps.length})`;
            allPill.onclick = () => toggleCategoryFilter('all');
            allPill.setAttribute('data-category', 'all');
            filterContainer.appendChild(allPill);

            // Add category filters
            categories.forEach(category => {
                const count = allApps.filter(app => app.tags?.includes(category)).length;
                const pill = document.createElement('button');
                pill.className = 'filter-pill';
                pill.textContent = `${getCategoryIcon(category)} ${category.toUpperCase()} (${count})`;
                pill.onclick = () => toggleCategoryFilter(category);
                pill.setAttribute('data-category', category);
                filterContainer.appendChild(pill);
            });
        }

        // Get category icon
        function getCategoryIcon(category) {
            const icons = {
                'ai': '🤖',
                'tools': '🛠️',
                'business': '💼',
                'development': '💻',
                'games': '🎮',
                'education': '🎓',
                'media': '📹',
                'productivity': '📋',
                'utility': '🔧',
                'archive': '📦',
                'health': '❤️',
                'p2p': '🌐',
                'multiplayer': '👥',
                'experimental': '🧪',
                'quantum-worlds': '🌌'
            };
            return icons[category] || '📄';
        }

        // Toggle category filter
        function toggleCategoryFilter(category) {
            const allPill = document.querySelector('[data-category="all"]');
            const categoryPills = document.querySelectorAll(`[data-category="${category}"]`);

            if (category === 'all') {
                // Clear all filters
                activeCategories.clear();
                document.querySelectorAll('.filter-pill').forEach(pill => {
                    pill.classList.remove('active');
                });
                allPill.classList.add('active');
            } else {
                // Toggle specific category
                if (activeCategories.has(category)) {
                    activeCategories.delete(category);
                    categoryPills.forEach(pill => pill.classList.remove('active'));
                } else {
                    activeCategories.add(category);
                    categoryPills.forEach(pill => pill.classList.add('active'));
                }

                // Update "All" pill
                if (activeCategories.size === 0) {
                    allPill.classList.add('active');
                } else {
                    allPill.classList.remove('active');
                }
            }

            filterApps();
        }

        // Filter apps based on search and category
        function filterApps() {
            const searchTerm = document.getElementById('app-search-input').value.toLowerCase();

            filteredApps = allApps.filter(app => {
                // Search filter
                const matchesSearch = !searchTerm ||
                    app.title?.toLowerCase().includes(searchTerm) ||
                    app.description?.toLowerCase().includes(searchTerm) ||
                    app.tags?.some(tag => tag.toLowerCase().includes(searchTerm));

                // Category filter
                const matchesCategory = activeCategories.size === 0 ||
                    app.tags?.some(tag => activeCategories.has(tag));

                return matchesSearch && matchesCategory;
            });

            renderApps();
            updateAppStats();
        }

        // Render apps grid
        function renderApps() {
            const grid = document.getElementById('apps-grid');
            const noResults = document.getElementById('apps-no-results');

            grid.innerHTML = '';

            if (filteredApps.length === 0) {
                grid.style.display = 'none';
                noResults.style.display = 'block';
                return;
            }

            grid.style.display = 'grid';
            noResults.style.display = 'none';

            filteredApps.forEach(app => {
                const card = document.createElement('div');
                card.className = 'capability-card';
                card.onclick = () => launchApp(app);

                const tags = app.tags?.map(tag =>
                    `<span style="background: rgba(0,255,65,0.2); padding: 2px 6px; border-radius: 3px; font-size: 0.7rem; margin-right: 4px;">${tag}</span>`
                ).join('') || '';

                card.innerHTML = `
                    <div class="capability-header">
                        <div class="capability-title">${app.icon || '📄'} ${app.title}</div>
                        <div class="capability-status ready">AVAILABLE</div>
                    </div>
                    <div class="capability-description">
                        ${app.description || 'No description available'}
                    </div>
                    <div class="capability-stats" style="flex-wrap: wrap; gap: 4px;">
                        ${tags}
                    </div>
                `;

                grid.appendChild(card);
            });
        }

        // Update app statistics
        function updateAppStats() {
            const categoriesCount = new Set();
            allApps.forEach(app => {
                app.tags?.forEach(tag => categoriesCount.add(tag));
            });

            document.getElementById('total-apps-count').textContent = allApps.length;
            document.getElementById('filtered-apps-count').textContent = filteredApps.length;
            document.getElementById('categories-count').textContent = categoriesCount.size;
        }

        // Set launch mode
        function setLaunchMode(mode) {
            launchMode = mode;

            // Update UI
            document.getElementById('launch-modal-btn').classList.toggle('active', mode === 'modal');
            document.getElementById('launch-window-btn').classList.toggle('active', mode === 'window');

            // Save preference
            localStorage.setItem('app_launch_mode', mode);

            showNotification(`🚀 Launch mode: ${mode === 'modal' ? 'Modal' : 'New Window'}`);
        }

        // Launch app
        function launchApp(app) {
            if (launchMode === 'modal') {
                openAppModal(app);
            } else {
                window.open(app.path, '_blank');
            }

            // Track app launch
            trackAppLaunch(app);
        }

        // Open app in modal
        function openAppModal(app) {
            const modal = document.getElementById('app-modal');
            const title = document.getElementById('app-modal-title');
            const iframe = document.getElementById('app-modal-iframe');

            title.textContent = app.title;
            iframe.src = app.path;
            modal.classList.add('active');
        }

        // Close app modal
        function closeAppModal() {
            const modal = document.getElementById('app-modal');
            const iframe = document.getElementById('app-modal-iframe');

            modal.classList.remove('active');
            iframe.src = ''; // Clear iframe to stop any running processes
        }

        // Close app modal on background click
        document.getElementById('app-modal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeAppModal();
            }
        });

        // Close app modal on ESC key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                const appModal = document.getElementById('app-modal');
                if (appModal.classList.contains('active')) {
                    closeAppModal();
                }
            }
        });

        // Track app launches
        function trackAppLaunch(app) {
            const launches = JSON.parse(localStorage.getItem('app_launches') || '{}');
            launches[app.id] = (launches[app.id] || 0) + 1;
            localStorage.setItem('app_launches', JSON.stringify(launches));
        }

        // Load saved launch mode preference
        const savedLaunchMode = localStorage.getItem('app_launch_mode');
        if (savedLaunchMode) {
            setLaunchMode(savedLaunchMode);
        }

        // Initialize apps when apps tab is opened
        const appsTabButton = document.querySelector('[onclick="switchTab(\'apps\')"]');
        if (appsTabButton) {
            const originalSwitchTab = window.switchTab;
            window.switchTab = function(tabName) {
                originalSwitchTab.call(this, tabName);

                // Load apps when apps tab is first opened
                if (tabName === 'apps' && allApps.length === 0) {
                    loadApps();
                }
            };
        }

        // ========== WAVE 4: EASTER EGGS ==========

        // Secret Developer Mode
        let searchMatrixCount = 0;
        let devModeActive = false;

        // Intercept search input for secret command
        const searchInput = document.getElementById('global-search');
        if (searchInput) {
            searchInput.addEventListener('input', (e) => {
                if (e.target.value.toLowerCase() === 'matrix') {
                    searchMatrixCount++;
                    if (searchMatrixCount >= 3 && !devModeActive) {
                        activateDeveloperMode();
                        searchMatrixCount = 0;
                    }
                } else {
                    searchMatrixCount = 0;
                }
            });
        }

        function activateDeveloperMode() {
            devModeActive = true;
            showNotification('🔓 DEVELOPER MODE ACTIVATED!');

            // Add special dev badge
            const badge = document.createElement('div');
            badge.id = 'dev-badge';
            badge.style.cssText = `
                position: fixed;
                top: 2rem;
                right: 2rem;
                background: var(--matrix-green);
                color: var(--deep-black);
                padding: 0.5rem 1rem;
                border-radius: 5px;
                font-weight: bold;
                z-index: 9999;
                animation: pulse 2s infinite;
                cursor: pointer;
            `;
            badge.textContent = '👨‍💻 DEV MODE';
            badge.onclick = showDevStats;
            document.body.appendChild(badge);

            // Unlock secret achievement
            setTimeout(() => {
                showNotification('🏆 Secret Achievement: Developer Unlocked!');
            }, 1500);
        }

        function showDevStats() {
            const stats = getStats();
            const challengeData = getDailyChallengeData();
            const theme = localStorage.getItem('matrix_theme') || 'matrix-green';
            const allData = {
                stats,
                challenge: challengeData,
                theme,
                devMode: devModeActive,
                totalStorage: JSON.stringify(localStorage).length,
                timestamp: new Date().toISOString()
            };

            const devModal = document.createElement('div');
            devModal.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: rgba(0, 0, 0, 0.98);
                border: 2px solid var(--matrix-green);
                border-radius: 10px;
                padding: 2rem;
                max-width: 600px;
                width: 90%;
                max-height: 80vh;
                overflow-y: auto;
                z-index: 10002;
                box-shadow: 0 0 50px var(--glow-green);
            `;
            devModal.innerHTML = `
                <h2 style="color: var(--matrix-green); margin-bottom: 1rem;">🔧 DEVELOPER STATS</h2>
                <pre style="color: var(--matrix-green); font-size: 0.85rem; line-height: 1.6; overflow-x: auto;">
${JSON.stringify(allData, null, 2)}
                </pre>
                <button onclick="this.parentElement.remove()" style="
                    background: var(--matrix-green);
                    color: var(--deep-black);
                    border: none;
                    padding: 0.5rem 1.5rem;
                    margin-top: 1rem;
                    cursor: pointer;
                    border-radius: 5px;
                    font-family: 'Courier New', monospace;
                ">CLOSE</button>
            `;
            document.body.appendChild(devModal);
        }

        // Logo click counter Easter egg
        let logoClicks = 0;
        let logoClickTimer = null;
        const logoElement = document.querySelector('h1');
        if (logoElement) {
            logoElement.style.cursor = 'pointer';
            logoElement.addEventListener('click', () => {
                logoClicks++;

                if (logoClickTimer) clearTimeout(logoClickTimer);

                logoClickTimer = setTimeout(() => {
                    logoClicks = 0;
                }, 2000);

                if (logoClicks === 10) {
                    triggerMatrixGlitch();
                    logoClicks = 0;
                } else if (logoClicks === 5) {
                    showNotification('🤔 Keep clicking...');
                }
            });
        }

        function triggerMatrixGlitch() {
            // Rapid theme cycling
            const themes = ['matrix-green', 'cyber-blue', 'alert-red', 'premium-gold', 'stealth-dark'];
            let cycleCount = 0;
            const interval = setInterval(() => {
                const randomTheme = themes[Math.floor(Math.random() * themes.length)];
                document.body.setAttribute('data-theme', randomTheme);
                cycleCount++;
                if (cycleCount >= 20) {
                    clearInterval(interval);
                    const savedTheme = localStorage.getItem('matrix_theme') || 'matrix-green';
                    document.body.setAttribute('data-theme', savedTheme);
                    showNotification('🌈 MATRIX GLITCH ACTIVATED!');
                }
            }, 100);
        }

        // Time-based Easter eggs
        function checkTimeBasedEasterEggs() {
            const now = new Date();
            const hour = now.getHours();
            const minute = now.getMinutes();

            // 13:37 (leet time)
            if (hour === 13 && minute === 37) {
                showNotification('🎮 1337 TIME DETECTED! You are elite!');
                setTimeout(() => {
                    const body = document.body;
                    body.style.filter = 'hue-rotate(180deg)';
                    setTimeout(() => {
                        body.style.filter = '';
                    }, 3000);
                }, 1000);
            }

            // Midnight
            if (hour === 0 && minute === 0) {
                showNotification('🌙 Welcome to the witching hour...');
            }

            // 4:20
            if (hour === 4 && minute === 20) {
                showNotification('🌿 Early morning discovery time!');
            }
        }

        // Check time-based Easter eggs every minute
        setInterval(checkTimeBasedEasterEggs, 60000);
        checkTimeBasedEasterEggs(); // Check immediately on load

        // Secret keyboard combination: Shift + Shift + Shift (triple shift)
        let shiftPressCount = 0;
        let shiftPressTimer = null;

        document.addEventListener('keydown', (e) => {
            if (e.key === 'Shift') {
                shiftPressCount++;

                if (shiftPressTimer) clearTimeout(shiftPressTimer);

                shiftPressTimer = setTimeout(() => {
                    shiftPressCount = 0;
                }, 1000);

                if (shiftPressCount === 3) {
                    activateMatrixRainBoost();
                    shiftPressCount = 0;
                }
            }
        });

        function activateMatrixRainBoost() {
            showNotification('⚡ MATRIX RAIN BOOST ACTIVATED!');
            // Speed up matrix rain temporarily
            const originalDrawInterval = 30;
            let boostedDrawInterval = 10;
            setTimeout(() => {
                showNotification('💚 Matrix rain returning to normal...');
            }, 5000);
        }

        // Export All Prompts
        function exportAllPrompts() {
            const allPrompts = `# THE MATRIX - ALL ORCHESTRATION PROMPTS

## 10 Mind-Blowing Flagship Prompts

1. **The Great Migration**
Transform 2,500 legacy PHP files into modern React/TypeScript components with 100% test coverage.
- Agents: 250 parallel
- Time: 15 minutes
- Speedup: 10,000x

2. **Documentation Engine**
Generate comprehensive docs for 3,500 codebase files across 50 microservices.
- Agents: 350 parallel
- Artifacts: 400 pages
- Time: 18 minutes

3. **Knowledge Synthesizer**
Analyze 75 research papers and generate 700 interconnected artifacts.
- Agents: 15 parallel
- Artifacts: 700 total
- Time: 12 minutes

4. **Automation Orchestrator**
Design 50 business processes with 950 automation artifacts.
- Agents: 50 parallel
- Artifacts: 950 total
- Time: 10 minutes

5. **Universe Architect**
Generate complete fictional universe with 1,100 elements.
- Agents: 10 parallel
- Elements: 1,100
- Time: 20 minutes

6. **System Designer**
Convert requirements into 1,800 system specifications.
- Agents: 100 parallel
- Specs: 1,800
- Time: 14 minutes

7. **Data Warehouse Genesis**
Design 8,500 data engineering artifacts from 100 sources.
- Agents: 100 parallel
- Artifacts: 8,500
- Time: 25 minutes

8. **The Infinite API**
Generate 25,000+ API artifacts across 200 microservices.
- Agents: 200 parallel
- Artifacts: 25,000+
- Time: 22 minutes

9. **Test Cathedral**
Generate 16,000 comprehensive tests with CI/CD.
- Agents: 200 parallel
- Tests: 16,000
- Time: 16 minutes

10. **D&D Campaign Architect**
Create complete 20-session campaign with 500+ elements.
- Agents: 10 parallel
- Elements: 500+
- Time: 18 minutes

## How to Use These Prompts

1. Choose a prompt that matches your domain
2. Adapt it to your specific project
3. Paste into Claude Code
4. The Matrix orchestrator will:
   - Analyze your project
   - Generate work breakdown structure
   - Spawn N parallel agents
   - Generate N×M artifacts
   - Integrate everything

---
Generated by The Matrix AI Orchestration System
`;

            const blob = new Blob([allPrompts], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'matrix-all-prompts.txt';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);

            showNotification('📦 All prompts exported!');
            toggleFabMenu();
        }

        // Random Prompt Selector
        function randomPrompt() {
            const allPrompts = [
                'great-migration', 'documentation-engine', 'knowledge-synthesizer',
                'automation-orchestrator', 'universe-architect', 'system-designer',
                'data-warehouse-genesis', 'api-universe', 'test-cathedral', 'dnd-campaign'
            ];

            const random = allPrompts[Math.floor(Math.random() * allPrompts.length)];
            openModal(random);
            showNotification('🎲 Random prompt selected!');
            toggleFabMenu();
        }

        // Reset Stats
        function resetStats() {
            if (confirm('Are you sure you want to reset all stats and favorites? This cannot be undone.')) {
                localStorage.clear();
                updateStatsDisplay();
                updateFavoriteButtons();
                showNotification('🔄 All stats and favorites reset!');
                toggleFabMenu();
            }
        }

        // Keyboard Shortcuts Handler
        document.addEventListener('keydown', (e) => {
            // Ignore if typing in input/textarea
            if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') {
                return;
            }

            switch(e.key.toLowerCase()) {
                case '?':
                    toggleShortcuts();
                    break;
                case 'b':
                    document.querySelector('.tab-button:nth-child(5)').click(); // Builder tab
                    break;
                case 'a':
                    document.querySelector('.tab-button:nth-child(6)').click(); // Analytics tab
                    break;
                case 'f':
                    showFavorites();
                    break;
                case 'r':
                    randomPrompt();
                    break;
                case 'k':
                    if (e.ctrlKey || e.metaKey) {
                        e.preventDefault();
                        document.getElementById('global-search').focus();
                    }
                    break;
            }
        });

        // Track modal opens
        const originalOpenModal = openModal;
        window.openModal = function(promptId) {
            addViewedPrompt(promptId);
            originalOpenModal(promptId);
        };

        // Track custom prompt generation
        const originalGeneratePrompt = generatePrompt;
        window.generatePrompt = function() {
            originalGeneratePrompt();
            incrementStat('built');
        };

        // Initialize stats on load
        updateStatsDisplay();
        updateFavoriteButtons();

        // Close FAB menu when clicking outside
        document.addEventListener('click', (e) => {
            const fab = document.getElementById('fab');
            const menu = document.getElementById('fab-menu');
            if (menu.style.display !== 'none' && !fab.contains(e.target) && !menu.contains(e.target)) {
                toggleFabMenu();
            }
        });

        // ========== WAVE 3: ACHIEVEMENT SYSTEM ==========

        const ACHIEVEMENTS = {
            first_steps: {
                id: 'first_steps',
                icon: '👶',
                title: 'First Steps',
                description: 'View your first prompt',
                condition: (stats) => stats.viewed >= 1,
                progress: (stats) => `${Math.min(stats.viewed, 1)}/1`
            },
            explorer: {
                id: 'explorer',
                icon: '🗺️',
                title: 'Explorer',
                description: 'View 10 different prompts',
                condition: (stats) => stats.viewed >= 10,
                progress: (stats) => `${Math.min(stats.viewed, 10)}/10`
            },
            completionist: {
                id: 'completionist',
                icon: '💯',
                title: 'Completionist',
                description: 'View all 40 prompts',
                condition: (stats) => stats.viewed >= 40,
                progress: (stats) => `${Math.min(stats.viewed, 40)}/40`
            },
            copycat: {
                id: 'copycat',
                icon: '📋',
                title: 'Copycat',
                description: 'Copy 5 prompts',
                condition: (stats) => stats.copied >= 5,
                progress: (stats) => `${Math.min(stats.copied, 5)}/5`
            },
            power_user: {
                id: 'power_user',
                icon: '⚡',
                title: 'Power User',
                description: 'Copy 20 prompts',
                condition: (stats) => stats.copied >= 20,
                progress: (stats) => `${Math.min(stats.copied, 20)}/20`
            },
            collector: {
                id: 'collector',
                icon: '⭐',
                title: 'Collector',
                description: 'Save 5 favorites',
                condition: (stats) => stats.favorites >= 5,
                progress: (stats) => `${Math.min(stats.favorites, 5)}/5`
            },
            builder: {
                id: 'builder',
                icon: '🏗️',
                title: 'Builder',
                description: 'Create your first custom prompt',
                condition: (stats) => stats.built >= 1,
                progress: (stats) => `${Math.min(stats.built, 1)}/1`
            },
            architect: {
                id: 'architect',
                icon: '🏛️',
                title: 'Architect',
                description: 'Build 5 custom prompts',
                condition: (stats) => stats.built >= 5,
                progress: (stats) => `${Math.min(stats.built, 5)}/5`
            },
            curator: {
                id: 'curator',
                icon: '🎨',
                title: 'Curator',
                description: 'Have 10 favorites',
                condition: (stats) => stats.favorites >= 10,
                progress: (stats) => `${Math.min(stats.favorites, 10)}/10`
            },
            speedrunner: {
                id: 'speedrunner',
                icon: '⏱️',
                title: 'Speedrunner',
                description: 'View all tabs in one session',
                condition: (stats) => (stats.tabs_visited || 0) >= 6,
                progress: (stats) => `${Math.min(stats.tabs_visited || 0, 6)}/6`
            },
            keyboard_ninja: {
                id: 'keyboard_ninja',
                icon: '⌨️',
                title: 'Keyboard Ninja',
                description: 'Use keyboard shortcuts 10 times',
                condition: (stats) => (stats.shortcuts_used || 0) >= 10,
                progress: (stats) => `${Math.min(stats.shortcuts_used || 0, 10)}/10`
            },
            matrix_master: {
                id: 'matrix_master',
                icon: '🎖️',
                title: 'Matrix Master',
                description: 'Unlock all achievements',
                condition: (stats) => Object.keys(getUnlockedAchievements()).length >= 11, // All except this one
                progress: (stats) => `${Math.min(Object.keys(getUnlockedAchievements()).length, 11)}/11`
            }
        };

        function getUnlockedAchievements() {
            const stored = localStorage.getItem('matrix_achievements');
            return stored ? JSON.parse(stored) : {};
        }

        function saveUnlockedAchievement(achievementId) {
            const unlocked = getUnlockedAchievements();
            unlocked[achievementId] = Date.now();
            localStorage.setItem('matrix_achievements', JSON.stringify(unlocked));
        }

        function checkAchievements() {
            const stats = getStats();
            const unlocked = getUnlockedAchievements();

            for (const [id, achievement] of Object.entries(ACHIEVEMENTS)) {
                if (!unlocked[id] && achievement.condition(stats)) {
                    unlockAchievement(achievement);
                }
            }

            // Update achievement count in FAB menu
            document.getElementById('achievement-count').textContent = Object.keys(unlocked).length;
        }

        function unlockAchievement(achievement) {
            saveUnlockedAchievement(achievement.id);

            // Show achievement notification
            const notification = document.getElementById('achievement-notification');
            document.getElementById('achievement-icon').textContent = achievement.icon;
            document.getElementById('achievement-title').textContent = achievement.title;
            document.getElementById('achievement-desc').textContent = achievement.description;
            document.getElementById('achievement-progress-text').textContent = '';

            notification.classList.add('show');

            // Play sound effect (if supported)
            try {
                const audio = new Audio('data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBDGA0PDE');
                audio.volume = 0.3;
                audio.play().catch(() => {});
            } catch(e) {}

            // Hide after 4 seconds
            setTimeout(() => {
                notification.classList.remove('show');
            }, 4000);

            // Update achievement count
            document.getElementById('achievement-count').textContent = Object.keys(getUnlockedAchievements()).length;
        }

        function showAchievements() {
            const modal = document.getElementById('modal');
            const modalTitle = document.getElementById('modal-title');
            const modalBody = document.getElementById('modal-body');
            const stats = getStats();
            const unlocked = getUnlockedAchievements();

            modalTitle.textContent = `🏆 Achievements (${Object.keys(unlocked).length}/${Object.keys(ACHIEVEMENTS).length})`;

            const achievementCards = Object.values(ACHIEVEMENTS).map(achievement => {
                const isUnlocked = unlocked[achievement.id];
                const progress = achievement.progress(stats);

                return `
                    <div class="achievement-card ${isUnlocked ? 'unlocked' : 'locked'}">
                        <div class="achievement-card-icon">${achievement.icon}</div>
                        <div class="achievement-card-title">${achievement.title}</div>
                        <div class="achievement-card-desc">${achievement.description}</div>
                        <div class="achievement-card-progress">
                            ${isUnlocked ? '✅ UNLOCKED' : progress}
                        </div>
                    </div>
                `;
            }).join('');

            modalBody.innerHTML = `
                <h3>Your Achievements</h3>
                <p>Unlock achievements by exploring The Matrix and using its features!</p>
                <div class="achievements-grid">
                    ${achievementCards}
                </div>
                ${Object.keys(unlocked).length === Object.keys(ACHIEVEMENTS).length ?
                '<p style="text-align: center; margin-top: 2rem; font-size: 1.5rem; color: var(--matrix-green);">🎉 ALL ACHIEVEMENTS UNLOCKED! 🎉</p>'
                : ''}
            `;

            modal.classList.add('active');
            toggleFabMenu();
        }

        // Track tab visits
        const originalSwitchTab = switchTab;
        window.switchTab = function(tabName) {
            originalSwitchTab(tabName);

            const stats = getStats();
            stats.tabs_visited = (stats.tabs_visited || 0) + 1;
            saveStats(stats);
            checkAchievements();
        };

        // Track shortcut usage
        const originalKeydownHandler = document.onkeydown;
        document.addEventListener('keydown', (e) => {
            if (e.key === '?' || e.key === 'b' || e.key === 'a' || e.key === 'f' || e.key === 'r' || (e.key === 'k' && (e.ctrlKey || e.metaKey))) {
                const stats = getStats();
                stats.shortcuts_used = (stats.shortcuts_used || 0) + 1;
                saveStats(stats);
                checkAchievements();
            }
        });

        // Override stats save to check achievements
        const originalSaveStats = saveStats;
        window.saveStats = function(stats) {
            originalSaveStats(stats);
            checkAchievements();
        };

        // Initialize achievement system
        checkAchievements();

        // ========== WAVE 4: COMPARISON TOOL ==========

        const PROMPT_DATA = {
            'great-migration': {
                title: 'The Great Migration',
                agents: 250,
                artifacts: 2500,
                time: 15,
                domain: 'Software Development',
                scale: 'Massive',
                description: 'Transform 2,500 legacy PHP files into modern React/TypeScript'
            },
            'documentation-engine': {
                title: 'Documentation Engine',
                agents: 350,
                artifacts: 400,
                time: 18,
                domain: 'Documentation',
                scale: 'Large',
                description: 'Generate comprehensive docs for 3,500 codebase files'
            },
            'knowledge-synthesizer': {
                title: 'Knowledge Synthesizer',
                agents: 15,
                artifacts: 700,
                time: 12,
                domain: 'Content Creation',
                scale: 'Medium',
                description: 'Analyze 75 research papers and generate 700 artifacts'
            },
            'automation-orchestrator': {
                title: 'Automation Orchestrator',
                agents: 50,
                artifacts: 950,
                time: 10,
                domain: 'Business Process',
                scale: 'Medium',
                description: 'Design 50 processes with 950 automation artifacts'
            },
            'universe-architect': {
                title: 'Universe Architect',
                agents: 10,
                artifacts: 1100,
                time: 20,
                domain: 'Creative Writing',
                scale: 'Medium',
                description: 'Generate complete fictional universe with 1,100 elements'
            },
            'system-designer': {
                title: 'System Designer',
                agents: 100,
                artifacts: 1800,
                time: 14,
                domain: 'Software Architecture',
                scale: 'Large',
                description: 'Convert requirements into 1,800 system specifications'
            },
            'data-warehouse-genesis': {
                title: 'Data Warehouse Genesis',
                agents: 100,
                artifacts: 8500,
                time: 25,
                domain: 'Data Engineering',
                scale: 'Massive',
                description: 'Design 8,500 data engineering artifacts'
            },
            'api-universe': {
                title: 'The Infinite API',
                agents: 200,
                artifacts: 25000,
                time: 22,
                domain: 'Software Development',
                scale: 'Massive',
                description: 'Generate 25,000+ API artifacts'
            },
            'test-cathedral': {
                title: 'Test Cathedral',
                agents: 200,
                artifacts: 16000,
                time: 16,
                domain: 'Quality Assurance',
                scale: 'Massive',
                description: 'Generate 16,000 comprehensive tests'
            },
            'dnd-campaign': {
                title: 'D&D Campaign Architect',
                agents: 10,
                artifacts: 500,
                time: 18,
                domain: 'Game Design',
                scale: 'Medium',
                description: 'Create complete 20-session campaign'
            }
        };

        function updateComparison() {
            const promptA = document.getElementById('compare-prompt-a').value;
            const promptB = document.getElementById('compare-prompt-b').value;

            const display = document.getElementById('comparison-display');
            const slots = display.querySelectorAll('.comparison-slot');

            // Update Prompt A
            if (promptA && PROMPT_DATA[promptA]) {
                const data = PROMPT_DATA[promptA];
                slots[0].classList.add('filled');
                slots[0].innerHTML = `
                    <div class="comparison-prompt-card">
                        <div class="comparison-prompt-title">${data.title}</div>
                        <p style="margin-bottom: 1.5rem; opacity: 0.8;">${data.description}</p>

                        <div class="comparison-metric">
                            <span class="metric-label">Domain</span>
                            <span class="metric-value">${data.domain}</span>
                        </div>
                        <div class="comparison-metric">
                            <span class="metric-label">Parallel Agents</span>
                            <span class="metric-value">${data.agents}</span>
                        </div>
                        <div class="comparison-metric">
                            <span class="metric-label">Total Artifacts</span>
                            <span class="metric-value">${data.artifacts.toLocaleString()}</span>
                        </div>
                        <div class="comparison-metric">
                            <span class="metric-label">Estimated Time</span>
                            <span class="metric-value">${data.time} min</span>
                        </div>
                        <div class="comparison-metric">
                            <span class="metric-label">Scale</span>
                            <span class="metric-value">${data.scale}</span>
                        </div>
                        <div class="comparison-metric">
                            <span class="metric-label">Artifacts/Min</span>
                            <span class="metric-value">${Math.round(data.artifacts / data.time)}</span>
                        </div>
                    </div>
                `;
            } else {
                slots[0].classList.remove('filled');
                slots[0].innerHTML = '<div class="placeholder-text">⬆️ Select Prompt A above to compare</div>';
            }

            // Update Prompt B
            if (promptB && PROMPT_DATA[promptB]) {
                const data = PROMPT_DATA[promptB];
                slots[1].classList.add('filled');
                slots[1].innerHTML = `
                    <div class="comparison-prompt-card">
                        <div class="comparison-prompt-title">${data.title}</div>
                        <p style="margin-bottom: 1.5rem; opacity: 0.8;">${data.description}</p>

                        <div class="comparison-metric">
                            <span class="metric-label">Domain</span>
                            <span class="metric-value">${data.domain}</span>
                        </div>
                        <div class="comparison-metric">
                            <span class="metric-label">Parallel Agents</span>
                            <span class="metric-value">${data.agents}</span>
                        </div>
                        <div class="comparison-metric">
                            <span class="metric-label">Total Artifacts</span>
                            <span class="metric-value">${data.artifacts.toLocaleString()}</span>
                        </div>
                        <div class="comparison-metric">
                            <span class="metric-label">Estimated Time</span>
                            <span class="metric-value">${data.time} min</span>
                        </div>
                        <div class="comparison-metric">
                            <span class="metric-label">Scale</span>
                            <span class="metric-value">${data.scale}</span>
                        </div>
                        <div class="comparison-metric">
                            <span class="metric-label">Artifacts/Min</span>
                            <span class="metric-value">${Math.round(data.artifacts / data.time)}</span>
                        </div>
                    </div>
                `;
            } else {
                slots[1].classList.remove('filled');
                slots[1].innerHTML = '<div class="placeholder-text">⬆️ Select Prompt B above to compare</div>';
            }

            // Show verdict if both selected
            if (promptA && promptB && PROMPT_DATA[promptA] && PROMPT_DATA[promptB]) {
                showVerdict(PROMPT_DATA[promptA], PROMPT_DATA[promptB]);
            } else {
                document.getElementById('comparison-verdict').style.display = 'none';
            }
        }

        function showVerdict(dataA, dataB) {
            const verdict = document.getElementById('comparison-verdict');
            const verdictContent = verdict.querySelector('.verdict-content');

            // Calculate winners
            const moreAgents = dataA.agents > dataB.agents ? dataA.title : dataB.title;
            const moreArtifacts = dataA.artifacts > dataB.artifacts ? dataA.title : dataB.title;
            const faster = dataA.time < dataB.time ? dataA.title : dataB.title;
            const moreEfficient = (dataA.artifacts / dataA.time) > (dataB.artifacts / dataB.time) ? dataA.title : dataB.title;

            // Calculate overall winner
            let scoreA = 0, scoreB = 0;
            if (dataA.artifacts > dataB.artifacts) scoreA++;
            else scoreB++;
            if (dataA.time < dataB.time) scoreA++;
            else scoreB++;
            if ((dataA.artifacts / dataA.time) > (dataB.artifacts / dataB.time)) scoreA++;
            else scoreB++;

            const overallWinner = scoreA > scoreB ? dataA.title : scoreB > scoreA ? dataB.title : 'TIE';

            verdictContent.innerHTML = `
                <div class="verdict-section">
                    <h4>📊 Key Metrics</h4>
                    <p><strong>More Artifacts:</strong> ${moreArtifacts}</p>
                    <p><strong>Faster Completion:</strong> ${faster}</p>
                    <p><strong>More Efficient:</strong> ${moreEfficient}</p>
                    <p><strong>More Agents:</strong> ${moreAgents}</p>
                </div>
                <div class="verdict-section">
                    <h4>🏆 Recommendation</h4>
                    ${overallWinner !== 'TIE' ?
                        `<p><strong>${overallWinner}</strong> is recommended based on overall metrics.</p>` :
                        '<p>Both prompts are equally matched!</p>'
                    }
                    <p style="margin-top: 1rem; opacity: 0.7;">Choose based on your specific domain and scale requirements.</p>
                </div>
            `;

            verdict.style.display = 'block';
        }

        // Console Easter Egg
        console.log('%c WAKE UP, NEO... ', 'background: #000; color: #00ff41; font-size: 20px; font-family: monospace; padding: 10px;');
        console.log('%c The Matrix has you... ', 'background: #000; color: #00ff41; font-size: 16px; font-family: monospace; padding: 10px;');
        console.log('%c Follow the white rabbit. ', 'background: #000; color: #00ff41; font-size: 16px; font-family: monospace; padding: 10px;');
        console.log('%c Knock, knock, Neo. ', 'background: #000; color: #00ff41; font-size: 16px; font-family: monospace; padding: 10px;');
    </script>
</body>
</html>